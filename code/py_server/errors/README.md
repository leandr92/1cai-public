# –ò–µ—Ä–∞—Ä—Ö–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è 1–° MCP —Å–µ—Ä–≤–µ—Ä–∞

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è Python —Å–µ—Ä–≤–µ—Ä–∞, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å 1–° —á–µ—Ä–µ–∑ MCP –ø—Ä–æ—Ç–æ–∫–æ–ª.

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
errors/
‚îú‚îÄ‚îÄ __init__.py          # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π
‚îú‚îÄ‚îÄ base.py             # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π
‚îú‚îÄ‚îÄ validation.py       # –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (E020-E039)
‚îú‚îÄ‚îÄ transport.py        # –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ (E040-E059)
‚îú‚îÄ‚îÄ integration.py      # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (E060-E079)
‚îú‚îÄ‚îÄ mcp.py              # MCP-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ mapping.py          # –ú–∞–ø–ø–∏–Ω–≥ 1–° ‚Üî Python
‚îú‚îÄ‚îÄ example_usage.py    # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ test_simple.py      # –ü—Ä–æ—Å—Ç—ã–µ —Ç–µ—Å—Ç—ã
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å McpError
- **ErrorCode**: –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ E001-E099
- **ErrorType**: –¢–∏–ø –æ—à–∏–±–∫–∏ (system/validation/transport/integration/auth/database/mcp)
- **CorrelationID**: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- **Context**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
- **Recoverable**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **Severity**: –°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å –æ—à–∏–±–∫–∏ (low/medium/high/critical)

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

#### 1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –æ—à–∏–±–∫–∏ (E001-E019)
- –û–±—â–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–±–æ–∏
- –û—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤

#### 2. –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (E020-E039)
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
- –ù–∞—Ä—É—à–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞
- **–ù–µ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã–µ** - —Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

#### 3. –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ (E040-E059)
- –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
- –¢–∞–π–º–∞—É—Ç—ã
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã–µ** - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç retry

#### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (E060-E079)
- –û—à–∏–±–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ù–∞—Ä—É—à–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ API
- **–ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞** –æ—à–∏–±–∫–∏

#### 5. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (E080-E089)
- –ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å—Ç–µ–∫—à–∏–µ —Ç–æ–∫–µ–Ω—ã
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤

#### 6. –ë–î –æ—à–∏–±–∫–∏ (E090-E099)
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
- –ù–∞—Ä—É—à–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
- –î–µ–¥–ª–æ–∫–∏

#### 7. MCP –æ—à–∏–±–∫–∏
- –ù–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- –û—à–∏–±–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏

## üîÑ –ú–∞–ø–ø–∏–Ω–≥ 1–° ‚Üî Python

–°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω—É—é —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é –æ—à–∏–±–æ–∫ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏:

```python
from errors.mapping import translate_python_error_to_1c, translate_1c_error_to_python

# Python ‚Üí 1–°
python_error = ValidationError("E020", field_name="email")
one_c_data = translate_python_error_to_1c(python_error)

# 1–° ‚Üí Python  
python_error = translate_1c_error_to_python(one_c_data)
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
```python
from errors import McpError

error = McpError(
    error_code="E001",
    error_type="system",
    user_message="–û–±—â–∞—è —Å–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞",
    correlation_id="req-123456"
)
```

### –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```python
from errors.validation import InvalidInputDataError

raise InvalidInputDataError(
    field_name="email",
    field_value="invalid-email",
    expected_format="user@domain.com"
)
```

### –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
```python
from errors.transport import ConnectionTimeoutError

raise ConnectionTimeoutError(
    url="https://api.example.com",
    timeout_seconds=30.0
)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞
```python
from errors.integration import ExternalServiceUnavailableError

raise ExternalServiceUnavailableError(
    service_name="payment_api",
    service_url="https://payments.example.com"
)
```

## üìä MCP –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ MCP
```python
response = error.to_mcp_response()
# {
#     "error": {
#         "code": "E040",
#         "message": "–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞",
#         "data": {
#             "type": "transport",
#             "correlation_id": "uuid",
#             "context": {...}
#         }
#     }
# }
```

### –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- `tools/list` - —Å–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `tools/call` - –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞  
- `resources` - —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏
- `prompts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞–º–∏

## üîß Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

1. **Graceful Degradation**: –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **Retry Logic**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã—Ö –æ—à–∏–±–æ–∫
3. **Circuit Breaker**: –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–±–æ–µ–≤
4. **Fallback Responses**: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
error = McpError("E042", "ServiceUnavailable", "–°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω")
log_data = error.to_structured_log()

# JSON –¥–ª—è ELK/Splunk
{
    "error_code": "E042",
    "error_type": "ServiceUnavailable", 
    "correlation_id": "uuid",
    "severity": "high",
    "recoverable": true,
    "timestamp": "2025-10-29T22:20:38Z"
}
```

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø–æ —Ç–∏–ø–∞–º
- –í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –ü—Ä–æ—Ü–µ–Ω—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã—Ö –æ—à–∏–±–æ–∫
- –¢–æ–ø –æ—à–∏–±–æ–∫ –ø–æ —á–∞—Å—Ç–æ—Ç–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤
python test_simple.py

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
python example_usage.py
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- **–í–µ—Ä—Å–∏—è**: 1.0.0
- **–õ–∏—Ü–µ–Ω–∑–∏—è**: MIT
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: Python 3.8+

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
1. **ConnectionTimeoutError**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
2. **ExternalServiceUnavailableError**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
3. **ValidationError**: –ò—Å–ø—Ä–∞–≤—å—Ç–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
4. **McpProtocolError**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ MCP

### –ü–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã
```python
error.is_retryable()           # –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
error.get_retry_after()        # –í—Ä–µ–º—è –¥–æ –ø–æ–≤—Ç–æ—Ä–∞
error.to_dict()               # –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
error.add_context()           # –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
error.to_mcp_response()       # MCP —Ñ–æ—Ä–º–∞—Ç
```

---
*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ –∫–æ–¥–∞ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤*
