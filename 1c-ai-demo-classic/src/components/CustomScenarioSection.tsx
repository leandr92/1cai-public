import React, { useState } from 'react';
import { Play, Send, Loader2, Download, Sparkles, Eye, Target, Code, FileText, BarChart3 } from 'lucide-react';
import toast from 'react-hot-toast';

interface ScenarioStep {
  id: string;
  title: string;
  description: string;
  completed: boolean;
}

interface GeneratedFile {
  id: string;
  type: 'code' | 'document' | 'diagram';
  title: string;
  filename: string;
  content: string;
  size: string;
}

interface Role {
  id: string;
  name: string;
  icon: string;
}

const roles: Role[] = [
  { id: 'architect', name: '–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä', icon: 'üèóÔ∏è' },
  { id: 'developer', name: '–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫', icon: 'üíª' },
  { id: 'pm', name: 'Project Manager', icon: 'üìä' },
  { id: 'ba', name: 'Business Analyst', icon: 'üìã' },
  { id: 'data-analyst', name: 'Data Analyst', icon: 'üìà' }
];

const exampleDescriptions = [
  "–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ —Å–∫–∏–¥–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ –∏ —Ç–∏–ø–∞ –∫–ª–∏–µ–Ω—Ç–∞",
  "–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ",
  "–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –ø–µ—Ä–∏–æ–¥–∞–º",
  "–ù—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã–ø–∏—Å–æ–∫",
  "–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤"
];

const CustomScenarioSection: React.FC = () => {
  const [isCustomMode, setIsCustomMode] = useState(false);
  const [taskDescription, setTaskDescription] = useState('');
  const [selectedRole, setSelectedRole] = useState('developer');
  const [isGenerating, setIsGenerating] = useState(false);
  const [generationSteps, setGenerationSteps] = useState<ScenarioStep[]>([]);
  const [generatedFiles, setGeneratedFiles] = useState<GeneratedFile[]>([]);

  const generateContent = async (description: string, role: string): Promise<GeneratedFile[]> => {
    // –ê–Ω–∞–ª–∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏
    const keywords = {
      sales: ['–ø—Ä–æ–¥–∞–∂', '–∑–∞–∫–∞–∑', '–∫–ª–∏–µ–Ω—Ç', '—Å—á–µ—Ç', '–¥–æ–≥–æ–≤–æ—Ä'],
      warehouse: ['—Å–∫–ª–∞–¥', '–æ—Å—Ç–∞—Ç–∫', '—Ç–æ–≤–∞—Ä', '–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä', '–ø—Ä–∏—Ö–æ–¥'],
      report: ['–æ—Ç—á–µ—Ç', '–∞–Ω–∞–ª–∏–∑', '–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫', '—Å–≤–æ–¥–Ω', '—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫'],
      integration: ['–∏–Ω—Ç–µ–≥—Ä–∞—Ü', 'api', 'web', '—Å–µ—Ä–≤–∏—Å', '–æ–±–º–µ–Ω'],
      finance: ['—Ñ–∏–Ω–∞–Ω—Å', '–ø–ª–∞—Ç–µ–∂', '–±–∞–Ω–∫', '–¥–µ–Ω—å–≥–∏', '—Å–ø–∏—Å–∞–Ω–∏–µ'],
      production: ['–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤', '—Ç–µ—Ö–Ω–æ–ª–æ–≥', '–º–∞—Ä—à—Ä—É—Ç', '–æ–ø–µ—Ä–∞—Ü–∏—è'],
      hr: ['—Å–æ—Ç—Ä—É–¥–Ω–∏–∫', '–ø–µ—Ä—Å–æ–Ω–∞–ª', '–∑–∞—Ä–∞–±–æ—Ç', '—Ç–∞–±–µ–ª—å', '–æ—Ç–ø—É—Å–∫'],
      crm: ['–∫–ª–∏–µ–Ω—Ç', '–∫–æ–Ω—Ç–∞–∫—Ç', '–ª–∏–¥', '—Å–¥–µ–ª–∫–∞', '–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤'],
      regsv: ['—Ä–µ–≥–∏—Å—Ç—Ä —Å–≤–µ–¥–µ–Ω–∏–π', '—Ä–µ–≥–∏—Å—Ç—Ä', '–∏–∑–º–µ—Ä–µ–Ω–∏–µ', '–ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å', '–¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å', '–∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ', '–¥–∞—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∏—è', '—Å–æ—Ç—Ä—É–¥–Ω–∏–∫'],
    };

    const lowerDesc = description.toLowerCase();
    let taskType = 'general';

    for (const [type, words] of Object.entries(keywords)) {
      if (words.some(word => lowerDesc.includes(word))) {
        taskType = type;
        break;
      }
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏ –∏ —Ä–æ–ª–∏
    const baseFiles: GeneratedFile[] = [];

    // –ö–æ–¥ 1–°
    if (taskType === 'sales') {
      baseFiles.push({
        id: 'main-module',
        type: 'code',
        title: '–ú–æ–¥—É–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤',
        filename: 'OrdersProcessing.epf',
        content: `&–ù–∞–ö–ª–∏–µ–Ω—Ç–µ
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–ó–∞–∫–∞–∑(–ó–∞–∫–∞–∑) –≠–∫—Å–ø–æ—Ä—Ç
    
    –°–æ–æ–±—â–∏—Ç—å("–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–∫–∞–∑: " + –ó–∞–∫–∞–∑.–ù–æ–º–µ—Ä);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–∫–∞–∑–µ
    –ï—Å–ª–∏ –ó–∞–∫–∞–∑.–¢–æ–≤–∞—Ä—ã.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ() = 0 –¢–æ–≥–¥–∞
        –°–æ–æ–±—â–∏—Ç—å("–û—à–∏–±–∫–∞: –ó–∞–∫–∞–∑ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–≤–∞—Ä–æ–≤");
        –í–æ–∑–≤—Ä–∞—Ç;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    // –†–∞—Å—á–µ—Ç —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞
    –û–±—â–∞—è–°—É–º–º–∞ = 0;
    –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ = 0;
    
    –î–ª—è –ö–∞–∂–¥–æ–≥–æ –°—Ç—Ä–æ–∫–∞ –ò–∑ –ó–∞–∫–∞–∑.–¢–æ–≤–∞—Ä—ã –¶–∏–∫–ª
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ
        –î–æ—Å—Ç—É–ø–Ω–æ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ = –ü–æ–ª—É—á–∏—Ç—å–î–æ—Å—Ç—É–ø–Ω–æ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–¢–æ–≤–∞—Ä–∞(–°—Ç—Ä–æ–∫–∞.–¢–æ–≤–∞—Ä);
        
        –ï—Å–ª–∏ –°—Ç—Ä–æ–∫–∞.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ > –î–æ—Å—Ç—É–ø–Ω–æ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¢–æ–≥–¥–∞
            –°–æ–æ–±—â–∏—Ç—å("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞: " + –°—Ç—Ä–æ–∫–∞.–¢–æ–≤–∞—Ä + ". –î–æ—Å—Ç—É–ø–Ω–æ: " + –î–æ—Å—Ç—É–ø–Ω–æ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ);
            –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å;
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        // –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏
        –¶–µ–Ω–∞–°–ù–î–° = –°—Ç—Ä–æ–∫–∞.–¶–µ–Ω–∞;
        –ï—Å–ª–∏ –ó–∞–∫–∞–∑.–ö–ª–∏–µ–Ω—Ç.–ù–î–° = –ò—Å—Ç–∏–Ω–∞ –¢–æ–≥–¥–∞
            –¶–µ–Ω–∞–°–ù–î–° = –°—Ç—Ä–æ–∫–∞.–¶–µ–Ω–∞ * 1.2;
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        –°—É–º–º–∞–°—Ç—Ä–æ–∫–∏ = –°—Ç—Ä–æ–∫–∞.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ * –¶–µ–Ω–∞–°–ù–î–°;
        –û–±—â–∞—è–°—É–º–º–∞ = –û–±—â–∞—è–°—É–º–º–∞ + –°—É–º–º–∞–°—Ç—Ä–æ–∫–∏;
        –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ = –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ + –°—Ç—Ä–æ–∫–∞.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ;
        
        –°–æ–æ–±—â–∏—Ç—å("–°—Ç—Ä–æ–∫–∞: " + –°—Ç—Ä–æ–∫–∞.–¢–æ–≤–∞—Ä + " = " + –°—É–º–º–∞–°—Ç—Ä–æ–∫–∏);
    –ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
    
    // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—ä–µ–º–∞
    –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç = 0;
    –ï—Å–ª–∏ –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ > 100 –¢–æ–≥–¥–∞
        –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç = 15;
    –ò–Ω–∞—á–µ–ï—Å–ª–∏ –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ > 50 –¢–æ–≥–¥–∞
        –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç = 10;
    –ò–Ω–∞—á–µ–ï—Å–ª–∏ –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ > 20 –¢–æ–≥–¥–∞
        –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç = 5;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –¥–ª—è VIP –∫–ª–∏–µ–Ω—Ç–æ–≤
    –ï—Å–ª–∏ –ó–∞–∫–∞–∑.–ö–ª–∏–µ–Ω—Ç.–¢–∏–ø = "VIP" –¢–æ–≥–¥–∞
        –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç = –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç + 5;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏
    –ï—Å–ª–∏ –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç > 0 –¢–æ–≥–¥–∞
        –°–∫–∏–¥–∫–∞–°—É–º–º–∞ = –û–±—â–∞—è–°—É–º–º–∞ * –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç / 100;
        –û–±—â–∞—è–°—É–º–º–∞ = –û–±—â–∞—è–°—É–º–º–∞ - –°–∫–∏–¥–∫–∞–°—É–º–º–∞;
        –°–æ–æ–±—â–∏—Ç—å("–ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Å–∫–∏–¥–∫–∞ " + –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç + "% = " + –°–∫–∏–¥–∫–∞–°—É–º–º–∞);
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    –ó–∞–∫–∞–∑.–û–±—â–∞—è–°—É–º–º–∞ = –û–±—â–∞—è–°—É–º–º–∞;
    –ó–∞–∫–∞–∑.–°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç = –°–∫–∏–¥–∫–∞–ü—Ä–æ—Ü–µ–Ω—Ç;
    –ó–∞–∫–∞–∑.–û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ = –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ;
    
    –°–æ–æ–±—â–∏—Ç—å("–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ: " + –û–±—â–∞—è–°—É–º–º–∞);
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã`,
        size: '3.2 KB'
      });
    }

    if (taskType === 'warehouse') {
      baseFiles.push({
        id: 'warehouse-module',
        type: 'code',
        title: '–ú–æ–¥—É–ª—å —Å–∫–ª–∞–¥—Å–∫–æ–≥–æ —É—á–µ—Ç–∞',
        filename: 'WarehouseManagement.epf',
        content: `&–ù–∞–°–µ—Ä–≤–µ—Ä–µ
–§—É–Ω–∫—Ü–∏—è –ü–æ–ª—É—á–∏—Ç—å–û—Å—Ç–∞—Ç–æ–∫–¢–æ–≤–∞—Ä–∞(–¢–æ–≤–∞—Ä, –°–∫–ª–∞–¥) –≠–∫—Å–ø–æ—Ä—Ç
    
    –ó–∞–ø—Ä–æ—Å = –ù–æ–≤—ã–π –ó–∞–ø—Ä–æ—Å;
    –ó–∞–ø—Ä–æ—Å.–¢–µ–∫—Å—Ç = "
    |–í–´–ë–†–ê–¢–¨
    |    –û—Å—Ç–∞—Ç–∫–∏.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–û—Å—Ç–∞—Ç–æ–∫ –ö–ê–ö –û—Å—Ç–∞—Ç–æ–∫
    |–ò–ó
    |    –†–µ–≥–∏—Å—Ç—Ä–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è.–û—Å—Ç–∞—Ç–∫–∏–¢–æ–≤–∞—Ä–æ–≤.–û—Å—Ç–∞—Ç–∫–∏(&–ü–µ—Ä–∏–æ–¥, –¢–æ–≤–∞—Ä = &–¢–æ–≤–∞—Ä –ò –°–∫–ª–∞–¥ = &–°–∫–ª–∞–¥) –ö–ê–ö –û—Å—Ç–∞—Ç–∫–∏";
    
    –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–ü–µ—Ä–∏–æ–¥", –¢–µ–∫—É—â–∞—è–î–∞—Ç–∞());
    –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–¢–æ–≤–∞—Ä", –¢–æ–≤–∞—Ä);
    –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–°–∫–ª–∞–¥", –°–∫–ª–∞–¥);
    
    –†–µ–∑—É–ª—å—Ç–∞—Ç = –ó–∞–ø—Ä–æ—Å.–í—ã–ø–æ–ª–Ω–∏—Ç—å();
    –í—ã–±–æ—Ä–∫–∞ = –†–µ–∑—É–ª—å—Ç–∞—Ç.–í—ã–±—Ä–∞—Ç—å();
    
    –ï—Å–ª–∏ –í—ã–±–æ—Ä–∫–∞.–°–ª–µ–¥—É—é—â–∏–π() –¢–æ–≥–¥–∞
        –í–æ–∑–≤—Ä–∞—Ç –í—ã–±–æ—Ä–∫–∞.–û—Å—Ç–∞—Ç–æ–∫;
    –ò–Ω–∞—á–µ
        –í–æ–∑–≤—Ä–∞—Ç 0;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏`,
        size: '2.8 KB'
      });
    }

    if (taskType === 'report') {
      baseFiles.push({
        id: 'report-module',
        type: 'code',
        title: '–ú–æ–¥—É–ª—å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞',
        filename: 'SalesReport.epf',
        content: `&–ù–∞–°–µ—Ä–≤–µ—Ä–µ
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å–û—Ç—á–µ—Ç() –≠–∫—Å–ø–æ—Ä—Ç
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—Ç—á–µ—Ç–∞
    –î–∞—Ç–∞–ù–∞—á–∞–ª–∞ = –ü–æ–ª—É—á–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–î–∞—Ç–∞–ù–∞—á–∞–ª–∞");
    –î–∞—Ç–∞–û–∫–æ–Ω—á–∞–Ω–∏—è = –ü–æ–ª—É—á–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–î–∞—Ç–∞–û–∫–æ–Ω—á–∞–Ω–∏—è");
    –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–ü–æ = –ü–æ–ª—É—á–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–ü–æ"); // –¢–æ–≤–∞—Ä—ã, –ö–ª–∏–µ–Ω—Ç—ã, –ü–µ—Ä–∏–æ–¥—ã
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞–∫–µ—Ç–∞ –æ—Ç—á–µ—Ç–∞
    –ú–∞–∫–µ—Ç = –ü–æ–ª—É—á–∏—Ç—å–ú–∞–∫–µ—Ç("–ú–∞–∫–µ—Ç–ü—Ä–æ–¥–∞–∂–∏–ü–æ–ü–µ—Ä–∏–æ–¥–∞–º");
    
    –û–±–ª–∞—Å—Ç—å–®–∞–ø–∫–∞ = –ú–∞–∫–µ—Ç.–ü–æ–ª—É—á–∏—Ç—å–û–±–ª–∞—Å—Ç—å("–®–∞–ø–∫–∞");
    –û–±–ª–∞—Å—Ç—å–ò—Ç–æ–≥–æ–≤ = –ú–∞–∫–µ—Ç.–ü–æ–ª—É—á–∏—Ç—å–û–±–ª–∞—Å—Ç—å("–ò—Ç–æ–≥–∏");
    –û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π = –ú–∞–∫–µ—Ç.–ü–æ–ª—É—á–∏—Ç—å–û–±–ª–∞—Å—Ç—å("–î–µ—Ç–∞–ª—å–Ω—ã–µ–ó–∞–ø–∏—Å–∏");
    
    –î–æ–∫—É–º–µ–Ω—Ç–†–µ–∑—É–ª—å—Ç–∞—Ç.–û—á–∏—Å—Ç–∏—Ç—å();
    
    // –í—ã–≤–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –æ—Ç—á–µ—Ç–∞
    –û–±–ª–∞—Å—Ç—å–®–∞–ø–∫–∞.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ù–∞–∑–≤–∞–Ω–∏–µ–û—Ç—á–µ—Ç–∞ = "–û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º";
    –û–±–ª–∞—Å—Ç—å–®–∞–ø–∫–∞.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ü–µ—Ä–∏–æ–¥–û—Ç—á–µ—Ç–∞ = "—Å " + –§–æ—Ä–º–∞—Ç(–î–∞—Ç–∞–ù–∞—á–∞–ª–∞, "–î–§=dd.MM.yyyy") + " –ø–æ " + –§–æ—Ä–º–∞—Ç(–î–∞—Ç–∞–û–∫–æ–Ω—á–∞–Ω–∏—è, "–î–§=dd.MM.yyyy");
    –û–±–ª–∞—Å—Ç—å–®–∞–ø–∫–∞.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–î–∞—Ç–∞–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è = –§–æ—Ä–º–∞—Ç(–¢–µ–∫—É—â–∞—è–î–∞—Ç–∞(), "–î–§=dd.MM.yyyy HH:mm");
    
    –î–æ–∫—É–º–µ–Ω—Ç–†–µ–∑—É–ª—å—Ç–∞—Ç.–í—ã–≤–µ—Å—Ç–∏(–û–±–ª–∞—Å—Ç—å–®–∞–ø–∫–∞);
    
    // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
    –ó–∞–ø—Ä–æ—Å = –ù–æ–≤—ã–π –ó–∞–ø—Ä–æ—Å;
    
    // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
    –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ = "
    |–í–´–ë–†–ê–¢–¨
    |    –ü—Ä–æ–¥–∞–∂–∏.–ü–µ—Ä–∏–æ–¥–î–µ–Ω—å –ö–ê–ö –ü–µ—Ä–∏–æ–¥,
    |    –°–£–ú–ú–ê(–ü—Ä–æ–¥–∞–∂–∏.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ) –ö–ê–ö –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ,
    |    –°–£–ú–ú–ê(–ü—Ä–æ–¥–∞–∂–∏.–°—É–º–º–∞) –ö–ê–ö –û–±—â–∞—è–°—É–º–º–∞,
    |    –°–£–ú–ú–ê(–ü—Ä–æ–¥–∞–∂–∏.–°—É–º–º–∞) * 100 / –°–£–ú–ú–ê(–ü—Ä–æ–¥–∞–∂–∏.–°—É–º–º–∞) –ö–ê–ö –î–æ–ª—è–í–ü—Ä–æ–¥–∞–∂–∞—Ö
    |–ò–ó
    |    –†–µ–≥–∏—Å—Ç—Ä–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è.–ü—Ä–æ–¥–∞–∂–∏ –ö–ê–ö –ü—Ä–æ–¥–∞–∂–∏
    |–ì–î–ï
    |    –ü—Ä–æ–¥–∞–∂–∏.–ü–µ—Ä–∏–æ–¥ >= &–î–∞—Ç–∞–ù–∞—á–∞–ª–∞
    |    –ò –ü—Ä–æ–¥–∞–∂–∏.–ü–µ—Ä–∏–æ–¥ <= &–î–∞—Ç–∞–û–∫–æ–Ω—á–∞–Ω–∏—è";
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
    –ï—Å–ª–∏ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–ü–æ = "–¢–æ–≤–∞—Ä—ã" –¢–æ–≥–¥–∞
        –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ = –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ + "
        |    –ò –ü—Ä–æ–¥–∞–∂–∏.–¢–æ–≤–∞—Ä <> –ó–ù–ê–ß–ï–ù–ò–ï(–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫.–¢–æ–≤–∞—Ä—ã.–ü—É—Å—Ç–∞—è–°—Å—ã–ª–∫–∞)";
    –ò–Ω–∞—á–µ–ï—Å–ª–∏ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–ü–æ = "–ö–ª–∏–µ–Ω—Ç—ã" –¢–æ–≥–¥–∞
        –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ = –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ + "
        |    –ò –ü—Ä–æ–¥–∞–∂–∏.–ö–ª–∏–µ–Ω—Ç <> –ó–ù–ê–ß–ï–ù–ò–ï(–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫.–ö–ª–∏–µ–Ω—Ç—ã.–ü—É—Å—Ç–∞—è–°—Å—ã–ª–∫–∞)";
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ = –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ + "
    |–°–ì–†–£–ü–ü–ò–†–û–í–ê–¢–¨ –ü–û
    |    –ü—Ä–æ–¥–∞–∂–∏.–ü–µ—Ä–∏–æ–¥–î–µ–Ω—å";
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –≤ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É
    –ï—Å–ª–∏ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–ü–æ = "–¢–æ–≤–∞—Ä—ã" –¢–æ–≥–¥–∞
        –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ = –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ + ",
        |    –ü—Ä–æ–¥–∞–∂–∏.–¢–æ–≤–∞—Ä";
    –ò–Ω–∞—á–µ–ï—Å–ª–∏ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–ü–æ = "–ö–ª–∏–µ–Ω—Ç—ã" –¢–æ–≥–¥–∞
        –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ = –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ + ",
        |    –ü—Ä–æ–¥–∞–∂–∏.–ö–ª–∏–µ–Ω—Ç";
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ = –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞ + "
    |–£–ü–û–†–Ø–î–û–ß–ò–¢–¨ –ü–û
    |    –ü—Ä–æ–¥–∞–∂–∏.–ü–µ—Ä–∏–æ–¥–î–µ–Ω—å –£–ë–´–í";
    
    –ó–∞–ø—Ä–æ—Å.–¢–µ–∫—Å—Ç = –¢–µ–∫—Å—Ç–ó–∞–ø—Ä–æ—Å–∞;
    –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–î–∞—Ç–∞–ù–∞—á–∞–ª–∞", –î–∞—Ç–∞–ù–∞—á–∞–ª–∞);
    –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–î–∞—Ç–∞–û–∫–æ–Ω—á–∞–Ω–∏—è", –î–∞—Ç–∞–û–∫–æ–Ω—á–∞–Ω–∏—è);
    
    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    –†–µ–∑—É–ª—å—Ç–∞—Ç = –ó–∞–ø—Ä–æ—Å.–í—ã–ø–æ–ª–Ω–∏—Ç—å();
    –í—ã–±–æ—Ä–∫–∞ = –†–µ–∑—É–ª—å—Ç–∞—Ç.–í—ã–±—Ä–∞—Ç—å();
    
    –û–±—â–∞—è–°—É–º–º–∞ = 0;
    –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ = 0;
    –ù–æ–º–µ—Ä–°—Ç—Ä–æ–∫–∏ = 1;
    
    –ü–æ–∫–∞ –í—ã–±–æ—Ä–∫–∞.–°–ª–µ–¥—É—é—â–∏–π() –¶–∏–∫–ª
        // –í—ã–≤–æ–¥ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
        –û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ù–æ–º–µ—Ä = –ù–æ–º–µ—Ä–°—Ç—Ä–æ–∫–∏;
        –û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ü–µ—Ä–∏–æ–¥ = –§–æ—Ä–º–∞—Ç(–í—ã–±–æ—Ä–∫–∞.–ü–µ—Ä–∏–æ–¥, "–î–§=dd.MM.yyyy");
        
        –ï—Å–ª–∏ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–ü–æ = "–¢–æ–≤–∞—Ä—ã" –¢–æ–≥–¥–∞
            –û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ = –°—Ç—Ä–æ–∫–∞(–í—ã–±–æ—Ä–∫–∞.–¢–æ–≤–∞—Ä);
        –ò–Ω–∞—á–µ–ï—Å–ª–∏ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞–ü–æ = "–ö–ª–∏–µ–Ω—Ç—ã" –¢–æ–≥–¥–∞
            –û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ = –°—Ç—Ä–æ–∫–∞(–í—ã–±–æ—Ä–∫–∞.–ö–ª–∏–µ–Ω—Ç);
        –ò–Ω–∞—á–µ
            –û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ = "–í—Å–µ–≥–æ";
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        –û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ = –í—ã–±–æ—Ä–∫–∞.–û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ;
        –û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–°—É–º–º–∞ = –í—ã–±–æ—Ä–∫–∞.–û–±—â–∞—è–°—É–º–º–∞;
        –û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–î–æ–ª—è = –í—ã–±–æ—Ä–∫–∞.–î–æ–ª—è–í–ü—Ä–æ–¥–∞–∂–∞—Ö;
        
        –î–æ–∫—É–º–µ–Ω—Ç–†–µ–∑—É–ª—å—Ç–∞—Ç.–í—ã–≤–µ—Å—Ç–∏(–û–±–ª–∞—Å—Ç—å–î–µ—Ç–∞–ª—å–Ω—ã—Ö–ó–∞–ø–∏—Å–µ–π);
        
        // –ü–æ–¥—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤
        –û–±—â–∞—è–°—É–º–º–∞ = –û–±—â–∞—è–°—É–º–º–∞ + –í—ã–±–æ—Ä–∫–∞.–û–±—â–∞—è–°—É–º–º–∞;
        –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ = –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ + –í—ã–±–æ—Ä–∫–∞.–û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ;
        –ù–æ–º–µ—Ä–°—Ç—Ä–æ–∫–∏ = –ù–æ–º–µ—Ä–°—Ç—Ä–æ–∫–∏ + 1;
    –ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
    
    // –í—ã–≤–æ–¥ –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
    –û–±–ª–∞—Å—Ç—å–ò—Ç–æ–≥–æ–≤.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ò—Ç–æ–≥–æ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ = –û–±—â–µ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ;
    –û–±–ª–∞—Å—Ç—å–ò—Ç–æ–≥–æ–≤.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã.–ò—Ç–æ–≥–æ–°—É–º–º–∞ = –û–±—â–∞—è–°—É–º–º–∞;
    –î–æ–∫—É–º–µ–Ω—Ç–†–µ–∑—É–ª—å—Ç–∞—Ç.–í—ã–≤–µ—Å—Ç–∏(–û–±–ª–∞—Å—Ç—å–ò—Ç–æ–≥–æ–≤);
    
    –°–æ–æ–±—â–∏—Ç—å("–û—Ç—á–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω. –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π: " + (–ù–æ–º–µ—Ä–°—Ç—Ä–æ–∫–∏ - 1));
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã`,
        size: '4.1 KB'
      });
    }

    if (taskType === 'regsv') {
      baseFiles.push({
        id: 'registers-module',
        type: 'code',
        title: '–ú–æ–¥—É–ª—å —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ —Å–≤–µ–¥–µ–Ω–∏–π',
        filename: 'RegistersModule.epf',
        content: `&–ù–∞–ö–ª–∏–µ–Ω—Ç–µ
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ò–∑–º–µ–Ω–∏—Ç—å–ò–∑–º–µ—Ä–µ–Ω–∏–µ–†–µ–≥–∏—Å—Ç—Ä–∞() –≠–∫—Å–ø–æ—Ä—Ç
    
    // –ü—Ä–∏–º–µ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ —Å–≤–µ–¥–µ–Ω–∏–π
    –°–æ—Ç—Ä—É–¥–Ω–∏–∫ = –ü–æ–ª—É—á–∏—Ç—å–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∞();
    –ù–æ–≤–∞—è–î–∞—Ç–∞–ü—Ä–∏–Ω—è—Ç–∏—è = –ü–æ–ª—É—á–∏—Ç—å–ù–æ–≤—É—é–î–∞—Ç—É();
    
    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
    –†–µ–∑—É–ª—å—Ç–∞—Ç = –ò–∑–º–µ–Ω–∏—Ç—å–î–∞—Ç—É–ü—Ä–∏–Ω—è—Ç–∏—è–ù–∞–°–µ—Ä–≤–µ—Ä–µ(–°–æ—Ç—Ä—É–¥–Ω–∏–∫, –ù–æ–≤–∞—è–î–∞—Ç–∞–ü—Ä–∏–Ω—è—Ç–∏—è);
    
    –ï—Å–ª–∏ –†–µ–∑—É–ª—å—Ç–∞—Ç –¢–æ–≥–¥–∞
        –°–æ–æ–±—â–∏—Ç—å("–î–∞—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∞");
    –ò–Ω–∞—á–µ
        –°–æ–æ–±—â–∏—Ç—å("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞—Ç—ã –ø—Ä–∏–Ω—è—Ç–∏—è");
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

&–ù–∞–°–µ—Ä–≤–µ—Ä–µ
–§—É–Ω–∫—Ü–∏—è –ò–∑–º–µ–Ω–∏—Ç—å–î–∞—Ç—É–ü—Ä–∏–Ω—è—Ç–∏—è–ù–∞–°–µ—Ä–≤–µ—Ä–µ(–°–æ—Ç—Ä—É–¥–Ω–∏–∫, –ù–æ–≤–∞—è–î–∞—Ç–∞) –≠–∫—Å–ø–æ—Ä—Ç
    
    // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–±–æ—Ä –∑–∞–ø–∏—Å–µ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞
    –ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π = –†–µ–≥–∏—Å—Ç—Ä—ã–°–≤–µ–¥–µ–Ω–∏–π.–ü–µ—Ä–∏–æ–¥—ã–†–∞–±–æ—Ç—ã–°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.–°–æ–∑–¥–∞—Ç—å–ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π();
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç–±–æ—Ä –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –∏ –ø–µ—Ä–∏–æ–¥—É
    –ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π.–û—Ç–±–æ—Ä.–°–æ—Ç—Ä—É–¥–Ω–∏–∫.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å(–°–æ—Ç—Ä—É–¥–Ω–∏–∫);
    –ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π.–û—Ç–±–æ—Ä.–ü–µ—Ä–∏–æ–¥.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å(–ù–æ–≤–∞—è–î–∞—Ç–∞);
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏
    –ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π.–ü—Ä–æ—á–∏—Ç–∞—Ç—å();
    
    –ï—Å–ª–∏ –ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ() > 0 –¢–æ–≥–¥–∞
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å
        –ó–∞–ø–∏—Å—å = –ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π[0];
        –ó–∞–ø–∏—Å—å.–°–æ—Ç—Ä—É–¥–Ω–∏–∫ = –°–æ—Ç—Ä—É–¥–Ω–∏–∫;
        –ó–∞–ø–∏—Å—å.–ü–µ—Ä–∏–æ–¥ = –ù–æ–≤–∞—è–î–∞—Ç–∞;
        –ó–∞–ø–∏—Å—å.–ò–∑–º–µ—Ä–µ–Ω–∏–µ–ò–∑–º–µ–Ω–µ–Ω–æ = –ò—Å—Ç–∏–Ω–∞;
        
        // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
        –ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π.–ó–∞–ø–∏—Å–∞—Ç—å();
        
        –í–æ–∑–≤—Ä–∞—Ç –ò—Å—Ç–∏–Ω–∞;
    –ò–Ω–∞—á–µ
        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å
        –ó–∞–ø–∏—Å—å = –ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π.–î–æ–±–∞–≤–∏—Ç—å();
        –ó–∞–ø–∏—Å—å.–°–æ—Ç—Ä—É–¥–Ω–∏–∫ = –°–æ—Ç—Ä—É–¥–Ω–∏–∫;
        –ó–∞–ø–∏—Å—å.–ü–µ—Ä–∏–æ–¥ = –ù–æ–≤–∞—è–î–∞—Ç–∞;
        –ó–∞–ø–∏—Å—å.–ò–∑–º–µ—Ä–µ–Ω–∏–µ–ò–∑–º–µ–Ω–µ–Ω–æ = –ò—Å—Ç–∏–Ω–∞;
        –ó–∞–ø–∏—Å—å.–ê–≤—Ç–æ—Ä–ò–∑–º–µ–Ω–µ–Ω–∏—è = –ü–æ–ª—É—á–∏—Ç—å–¢–µ–∫—É—â–µ–≥–æ–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è();
        
        // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å
        –ù–∞–±–æ—Ä–ó–∞–ø–∏—Å–µ–π.–ó–∞–ø–∏—Å–∞—Ç—å();
        
        –í–æ–∑–≤—Ä–∞—Ç –ò—Å—Ç–∏–Ω–∞;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏

&–ù–∞–°–µ—Ä–≤–µ—Ä–µ
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û—Ç–æ–±—Ä–∞—Ç—å–ü–æ–°–æ—Ç—Ä—É–¥–Ω–∏–∫—É(–°–æ—Ç—Ä—É–¥–Ω–∏–∫) –≠–∫—Å–ø–æ—Ä—Ç
    
    –ó–∞–ø—Ä–æ—Å = –ù–æ–≤—ã–π –ó–∞–ø—Ä–æ—Å;
    –ó–∞–ø—Ä–æ—Å.–¢–µ–∫—Å—Ç = "
    |–í–´–ë–†–ê–¢–¨
    |    –ü–µ—Ä–∏–æ–¥—ã.–°–æ—Ç—Ä—É–¥–Ω–∏–∫,
    |    –ü–µ—Ä–∏–æ–¥—ã.–ü–µ—Ä–∏–æ–¥,
    |    –ü–µ—Ä–∏–æ–¥—ã.–ò–∑–º–µ—Ä–µ–Ω–∏–µ–ò–∑–º–µ–Ω–µ–Ω–æ,
    |    –ü–µ—Ä–∏–æ–¥—ã.–ê–≤—Ç–æ—Ä–ò–∑–º–µ–Ω–µ–Ω–∏—è
    |–ò–ó
    |    –†–µ–≥–∏—Å—Ç—Ä–°–≤–µ–¥–µ–Ω–∏–π.–ü–µ—Ä–∏–æ–¥—ã–†–∞–±–æ—Ç—ã–°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ö–ê–ö –ü–µ—Ä–∏–æ–¥—ã
    |–ì–î–ï
    |    –ü–µ—Ä–∏–æ–¥—ã.–°–æ—Ç—Ä—É–¥–Ω–∏–∫ = &–°–æ—Ç—Ä—É–¥–Ω–∏–∫
    |–£–ü–û–†–Ø–î–û–ß–ò–¢–¨ –ü–û
    |    –ü–µ—Ä–∏–æ–¥—ã.–ü–µ—Ä–∏–æ–¥ –£–ë–´–í";
    
    –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–°–æ—Ç—Ä—É–¥–Ω–∏–∫", –°–æ—Ç—Ä—É–¥–Ω–∏–∫);
    
    –†–µ–∑—É–ª—å—Ç–∞—Ç = –ó–∞–ø—Ä–æ—Å.–í—ã–ø–æ–ª–Ω–∏—Ç—å();
    –í—ã–±–æ—Ä–∫–∞ = –†–µ–∑—É–ª—å—Ç–∞—Ç.–í—ã–±—Ä–∞—Ç—å();
    
    –ü–æ–∫–∞ –í—ã–±–æ—Ä–∫–∞.–°–ª–µ–¥—É—é—â–∏–π() –¶–∏–∫–ª
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø–∏—Å–∏
        –°–æ–æ–±—â–∏—Ç—å("–ü–µ—Ä–∏–æ–¥: " + –í—ã–±–æ—Ä–∫–∞.–ü–µ—Ä–∏–æ–¥ + ", –ò–∑–º–µ–Ω–µ–Ω–æ: " + –í—ã–±–æ—Ä–∫–∞.–ò–∑–º–µ—Ä–µ–Ω–∏–µ–ò–∑–º–µ–Ω–µ–Ω–æ);
    –ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã`,
        size: '5.8 KB'
      });
    }

    // –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    baseFiles.push({
      id: 'documentation',
      type: 'document',
      title: '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è',
      filename: 'Technical_Documentation.md',
      content: `# ${getTaskTypeName(taskType)} - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
${description}

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ª–æ–≥–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
${getMainFunctions(taskType)}

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
${getDataStructure(taskType)}

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
${getIntegrations(taskType)}

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
${getRecommendations(taskType)}`,
      size: '5.3 KB'
    });

    // –°—Ö–µ–º–∞/–¥–∏–∞–≥—Ä–∞–º–º–∞
    baseFiles.push({
      id: 'architecture',
      type: 'diagram',
      title: '–°—Ö–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã',
      filename: 'Architecture_Diagram.puml',
      content: getPlantUMLDiagram(taskType),
      size: '2.7 KB'
    });

    return baseFiles;
  };

  const getTaskTypeName = (type: string): string => {
    const names = {
      sales: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∞–º–∏',
      warehouse: '–°–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç',
      report: '–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã',
      integration: '–°–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏',
      finance: '–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á–µ—Ç',
      production: '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ',
      hr: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º',
      crm: 'CRM —Å–∏—Å—Ç–µ–º–∞',
      regsv: '–†–µ–≥–∏—Å—Ç—Ä—ã —Å–≤–µ–¥–µ–Ω–∏–π',
      general: '–û–±—â–∏–µ –∑–∞–¥–∞—á–∏'
    };
    return names[type as keyof typeof names] || names.general;
  };

  const getMainFunctions = (type: string): string => {
    const functions = {
      sales: '‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤\n‚Ä¢ –†–∞—Å—á–µ—Ç —Å–∫–∏–¥–æ–∫ –∏ –±–æ–Ω—É—Å–æ–≤\n‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–æ–≤\n‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º',
      warehouse: '‚Ä¢ –£—á–µ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤\n‚Ä¢ –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–≤–∏–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤\n‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏\n‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤',
      report: '‚Ä¢ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á–µ—Ç–æ–≤\n‚Ä¢ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ —Å–≤–æ–¥–∫–∞ –¥–∞–Ω–Ω—ã—Ö\n‚Ä¢ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π\n‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö',
      integration: '‚Ä¢ –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏\n‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π\n‚Ä¢ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤\n‚Ä¢ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π',
      finance: '‚Ä¢ –£—á–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π\n‚Ä¢ –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –≤—ã–ø–∏—Å–∫–∏\n‚Ä¢ –ü–ª–∞—Ç–µ–∂–Ω—ã–µ –ø–æ—Ä—É—á–µ–Ω–∏—è\n‚Ä¢ –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–µ–Ω–µ–∂–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤',
      production: '‚Ä¢ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞\n‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏\n‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è\n‚Ä¢ –£—á–µ—Ç –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏',
      hr: '‚Ä¢ –£—á–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∞\n‚Ä¢ –†–∞—Å—á–µ—Ç –∑–∞—Ä–∞–±–æ—Ç–Ω–æ–π –ø–ª–∞—Ç—ã\n‚Ä¢ –¢–∞–±–µ–ª—å —É—á–µ—Ç–∞ —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏\n‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—É—Å–∫–∞–º–∏',
      crm: '‚Ä¢ –í–µ–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∞–∑—ã\n‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π\n‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∞–º–∏\n‚Ä¢ –ê–Ω–∞–ª–∏–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏',
      regsv: '‚Ä¢ –†–∞–±–æ—Ç–∞ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ —Å–≤–µ–¥–µ–Ω–∏–π\n‚Ä¢ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑–º–µ—Ä–µ–Ω–∏–π\n‚Ä¢ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º\n‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏',
      general: '‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã\n‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏\n‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å\n‚Ä¢ –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å'
    };
    return functions[type as keyof typeof functions] || functions.general;
  };

  const getDataStructure = (type: string): string => {
    const structures = {
      sales: '‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤\n‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤\n‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã –∑–∞–∫–∞–∑–æ–≤\n‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä –ø—Ä–æ–¥–∞–∂',
      warehouse: '‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã\n‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–∫–ª–∞–¥–æ–≤\n‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤\n‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–≤–∏–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤',
      report: '‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤\n‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏\n‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä—ã –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è\n‚Ä¢ –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã',
      integration: '‚Ä¢ –ñ—É—Ä–Ω–∞–ª –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π\n‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º\n‚Ä¢ –û—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π\n‚Ä¢ –õ–æ–≥–∏ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏',
      finance: '‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å—á–µ—Ç–æ–≤\n‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã –ø–ª–∞—Ç–µ–∂–µ–π\n‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä –¥–≤–∏–∂–µ–Ω–∏—è –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤\n‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç–µ–π –¥–≤–∏–∂–µ–Ω–∏—è',
      production: '‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã\n‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π\n‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞\n‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä –∑–∞—Ç—Ä–∞—Ç',
      hr: '‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤\n‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã –∫–∞–¥—Ä–æ–≤–æ–≥–æ —É—á–µ—Ç–∞\n‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π\n‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤–∏–¥–æ–≤ —Ä–∞—Å—á–µ—Ç–æ–≤',
      crm: '‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤\n‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –ª–∏—Ü\n‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π\n‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏',
      regsv: '‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä —Å–≤–µ–¥–µ–Ω–∏–π "–ü–µ—Ä–∏–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤"\n‚Ä¢ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤\n‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è "–ù–∞—á–∏—Å–ª–µ–Ω–∏—è"\n‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã –∫–∞–¥—Ä–æ–≤–æ–≥–æ —É—á–µ—Ç–∞',
      general: '‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏\n‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã\n‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä—ã –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è\n‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏'
    };
    return structures[type as keyof typeof structures] || structures.general;
  };

  const getIntegrations = (type: string): string => {
    const integrations = {
      sales: '‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM —Å–∏—Å—Ç–µ–º–∞–º–∏\n‚Ä¢ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–µ–±-–º–∞–≥–∞–∑–∏–Ω–∞–º–∏\n‚Ä¢ –û–±–º–µ–Ω —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏\n‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏',
      warehouse: '‚Ä¢ –°–∫–∞–Ω–µ—Ä—ã —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤\n‚Ä¢ –°–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º (WMS)\n‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–º–∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏\n‚Ä¢ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏',
      report: '‚Ä¢ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel\n‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å BI-—Å–∏—Å—Ç–µ–º–∞–º–∏\n‚Ä¢ –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ email\n‚Ä¢ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –≤–µ–±-–ø–æ—Ä—Ç–∞–ª–µ',
      integration: '‚Ä¢ REST API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º\n‚Ä¢ SOAP –≤–µ–±-—Å–µ—Ä–≤–∏—Å—ã\n‚Ä¢ –§–∞–π–ª–æ–≤—ã–π –æ–±–º–µ–Ω (CSV, XML)\n‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö',
      finance: '‚Ä¢ –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã\n‚Ä¢ –ü–ª–∞—Ç–µ–∂–Ω—ã–µ —à–ª—é–∑—ã\n‚Ä¢ –°–∏—Å—Ç–µ–º—ã –±—é–¥–∂–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–µ–π',
      production: '‚Ä¢ MES —Å–∏—Å—Ç–µ–º—ã (Manufacturing Execution)\n‚Ä¢ SCADA —Å–∏—Å—Ç–µ–º—ã\n‚Ä¢ –°–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–æ–º\n‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏',
      hr: '‚Ä¢ –°–∏—Å—Ç–µ–º—ã —Ç–∞–±–µ–ª—å–Ω–æ–≥–æ —É—á–µ—Ç–∞\n‚Ä¢ –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –∑–∞—Ä–ø–ª–∞—Ç—ã\n‚Ä¢ –ö–∞–¥—Ä–æ–≤—ã–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã\n‚Ä¢ –°–∏—Å—Ç–µ–º—ã –æ–±—É—á–µ–Ω–∏—è',
      crm: '‚Ä¢ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã\n‚Ä¢ –°–∏—Å—Ç–µ–º—ã –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä–æ–≤\n‚Ä¢ –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏\n‚Ä¢ –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã',
      regsv: '‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–¥—Ä–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏\n‚Ä¢ –û–±–º–µ–Ω —Å –≤–Ω–µ—à–Ω–∏–º–∏ HR —Å–∏—Å—Ç–µ–º–∞–º–∏\n‚Ä¢ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏\n‚Ä¢ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã',
      general: '‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏\n‚Ä¢ API –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n‚Ä¢ –í–µ–±-–ø–æ—Ä—Ç–∞–ª –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤\n‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Office —Å–∏—Å—Ç–µ–º–∞–º–∏'
    };
    return integrations[type as keyof typeof integrations] || integrations.general;
  };

  const getRecommendations = (type: string): string => {
    const recommendations = {
      sales: '‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∫–∏–¥–æ–∫\n‚Ä¢ –í–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞–∫–∞–∑–æ–≤\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤\n‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥–∞–∂',
      warehouse: '‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∏–∑–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö\n‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É —à—Ç—Ä–∏—Ö-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ\n‚Ä¢ –í–µ–¥–∏—Ç–µ —É—á–µ—Ç —Å—Ä–æ–∫–æ–≤ –≥–æ–¥–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤',
      report: '‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤\n‚Ä¢ –°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏\n‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –ø–ª–∞–Ω—à–µ—Ç–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤',
      integration: '‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π\n‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫\n‚Ä¢ –í–µ–¥–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π\n‚Ä¢ –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ä–µ–¥—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π',
      finance: '‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≥—Ä—É–∑–∫—É –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –≤—ã–ø–∏—Å–æ–∫\n‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π\n‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–Ω–∫–∞—Å—Å–∞—Ü–∏–∏',
      production: '‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞\n‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã\n‚Ä¢ –í–µ–¥–∏—Ç–µ —É—á–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –æ—Ç –Ω–æ—Ä–º',
      hr: '‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –∑–∞—Ä–∞–±–æ—Ç–Ω–æ–π –ø–ª–∞—Ç—ã\n‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞\n‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Ç–µ–∫—É—á–µ—Å—Ç–∏ –∫–∞–¥—Ä–æ–≤\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ–¥–±–æ—Ä–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞',
      crm: '‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞\n‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏\n‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–æ–Ω–≤–µ—Ä—Å–∏—é –ª–∏–¥–æ–≤ –≤ –ø—Ä–æ–¥–∞–∂–∏\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ—Å–ª–µ–ø—Ä–æ–¥–∞–∂–Ω–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è',
      regsv: '‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ–¥–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π\n‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑–º–µ—Ä–µ–Ω–∏–π\n‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–º —Ä–µ–≥–∏—Å—Ç—Ä–∞–º',
      general: '‚Ä¢ –°–æ–∑–¥–∞–π—Ç–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –æ–±—É—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤\n‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã'
    };
    return recommendations[type as keyof typeof recommendations] || recommendations.general;
  };

  const getPlantUMLDiagram = (type: string): string => {
    const diagrams = {
      sales: `@startuml
title –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∞–º–∏

actor –ö–ª–∏–µ–Ω—Ç
actor –ú–µ–Ω–µ–¥–∂–µ—Ä
actor –°–∏—Å—Ç–µ–º–∞

–ö–ª–∏–µ–Ω—Ç -> –°–∏—Å—Ç–µ–º–∞: –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –†–∞—Å—á–µ—Ç —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏
–°–∏—Å—Ç–µ–º–∞ -> –ú–µ–Ω–µ–¥–∂–µ—Ä: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–∫–∞–∑–µ
–ú–µ–Ω–µ–¥–∂–µ—Ä -> –°–∏—Å—Ç–µ–º–∞: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–∞
–°–∏—Å—Ç–µ–º–∞ -> –ö–ª–∏–µ–Ω—Ç: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
@enduml`,
      warehouse: `@startuml
title –°–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç

actor –ö–ª–∞–¥–æ–≤—â–∏–∫
actor –°–∏—Å—Ç–µ–º–∞
actor –ü–æ—Å—Ç–∞–≤—â–∏–∫

–ü–æ—Å—Ç–∞–≤—â–∏–∫ -> –°–∏—Å—Ç–µ–º–∞: –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
–ö–ª–∞–¥–æ–≤—â–∏–∫ -> –°–∏—Å—Ç–µ–º–∞: –°–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
–°–∏—Å—Ç–µ–º–∞ -> –ö–ª–∞–¥–æ–≤—â–∏–∫: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö
@enduml`,
      report: `@startuml
title –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤

actor –ê–Ω–∞–ª–∏—Ç–∏–∫
actor –°–∏—Å—Ç–µ–º–∞

–ê–Ω–∞–ª–∏—Ç–∏–∫ -> –°–∏—Å—Ç–µ–º–∞: –ó–∞–ø—Ä–æ—Å –Ω–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
–°–∏—Å—Ç–µ–º–∞ -> –ê–Ω–∞–ª–∏—Ç–∏–∫: –ì–æ—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç
@enduml`,
      integration: `@startuml
title –°–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

participant –í–Ω–µ—à–Ω—è—è–°–∏—Å—Ç–µ–º–∞
participant 1–°
participant –û—á–µ—Ä–µ–¥—å–°–æ–æ–±—â–µ–Ω–∏–π

–í–Ω–µ—à–Ω—è—è–°–∏—Å—Ç–µ–º–∞ -> 1–°: HTTP –∑–∞–ø—Ä–æ—Å
1–° -> 1–°: –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
1–° -> –û—á–µ—Ä–µ–¥—å–°–æ–æ–±—â–µ–Ω–∏–π: –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å
–û—á–µ—Ä–µ–¥—å–°–æ–æ–±—â–µ–Ω–∏–π -> 1–°: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
1–° -> –í–Ω–µ—à–Ω—è—è–°–∏—Å—Ç–µ–º–∞: –û—Ç–≤–µ—Ç
@enduml`,
      regsv: `@startuml
title –†–∞–±–æ—Ç–∞ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ —Å–≤–µ–¥–µ–Ω–∏–π

actor –°–æ—Ç—Ä—É–¥–Ω–∏–∫HR
actor –°–∏—Å—Ç–µ–º–∞

–°–æ—Ç—Ä—É–¥–Ω–∏–∫HR -> –°–∏—Å—Ç–µ–º–∞: –ó–∞–ø—Ä–æ—Å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –ü–æ–∏—Å–∫ –∑–∞–ø–∏—Å–∏ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏—è
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
–°–∏—Å—Ç–µ–º–∞ -> –°–∏—Å—Ç–µ–º–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
–°–∏—Å—Ç–µ–º–∞ -> –°–æ—Ç—Ä—É–¥–Ω–∏–∫HR: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
@enduml`
    };
    return diagrams[type as keyof typeof diagrams] || diagrams.report;
  };

  const simulateGenerationSteps = async (): Promise<ScenarioStep[]> => {
    const steps: ScenarioStep[] = [
      { id: '1', title: '–ê–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏', description: '–ò–∑—É—á–∞—é –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –æ–ø—Ä–µ–¥–µ–ª—è—é —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è', completed: false },
      { id: '2', title: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã', description: '–ü–ª–∞–Ω–∏—Ä—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ—à–µ–Ω–∏—è', completed: false },
      { id: '3', title: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞', description: '–°–æ–∑–¥–∞—é –º–æ–¥—É–ª–∏ 1–° –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π', completed: false },
      { id: '4', title: '–°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏', description: '–§–æ—Ä–º–∏—Ä—É—é —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é', completed: false },
      { id: '5', title: '–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ö–µ–º—ã', description: '–°–æ–∑–¥–∞—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã', completed: false }
    ];

    for (let i = 0; i < steps.length; i++) {
      setGenerationSteps(prev => [
        ...prev.slice(0, i),
        { ...steps[i], completed: true } as ScenarioStep
      ]);
      await new Promise(resolve => setTimeout(resolve, 800));
    }

    return steps;
  };

  const handleGenerate = async () => {
    if (!taskDescription.trim()) {
      toast.error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É');
      return;
    }

    setIsGenerating(true);
    setGeneratedFiles([]);
    setGenerationSteps([]);

    try {
      // –°–∏–º—É–ª—è—Ü–∏—è —ç—Ç–∞–ø–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
      await simulateGenerationSteps();

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
      const files = await generateContent(taskDescription, selectedRole);
      setGeneratedFiles(files);

      toast.success('–†–µ—à–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ!');
    } catch (error) {
      toast.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ—à–µ–Ω–∏—è');
    } finally {
      setIsGenerating(false);
    }
  };

  const handleDownload = (file: GeneratedFile) => {
    const blob = new Blob([file.content], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = file.filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    toast.success(`–§–∞–π–ª ${file.filename} –∑–∞–≥—Ä—É–∂–µ–Ω`);
  };

  const useExample = (example: string) => {
    setTaskDescription(example);
  };

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
      <div className="text-center mb-16">
        <h2 className="section-title text-4xl font-bold mb-4">
          –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π
        </h2>
        <p className="text-xl text-slate-300 max-w-3xl mx-auto">
          –û–ø–∏—à–∏—Ç–µ —Å–≤–æ—é –∑–∞–¥–∞—á—É –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –æ—Ç –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
        </p>
      </div>

      {/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤ */}
      <div className="flex justify-center mb-8">
        <div className="bg-slate-800 border border-slate-700 rounded-lg p-1 flex">
          <button
            onClick={() => setIsCustomMode(false)}
            className={`px-6 py-2 rounded-md font-medium transition-all ${
              !isCustomMode
                ? 'bg-blue-600 text-white shadow-lg'
                : 'text-slate-300 hover:text-white'
            }`}
          >
            –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
          </button>
          <button
            onClick={() => setIsCustomMode(true)}
            className={`px-6 py-2 rounded-md font-medium transition-all ${
              isCustomMode
                ? 'bg-blue-600 text-white shadow-lg'
                : 'text-slate-300 hover:text-white'
            }`}
          >
            –ú–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π
          </button>
        </div>
      </div>

      {isCustomMode && (
        <div className="max-w-4xl mx-auto">
          {/* –ü—Ä–∏–º–µ—Ä—ã –æ–ø–∏—Å–∞–Ω–∏–π */}
          <div className="mb-8">
            <h3 className="text-lg font-semibold text-white mb-4">–ü—Ä–∏–º–µ—Ä—ã –æ–ø–∏—Å–∞–Ω–∏–π:</h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              {exampleDescriptions.map((example, index) => (
                <button
                  key={index}
                  onClick={() => useExample(example)}
                  className="text-left p-4 bg-slate-800/50 border border-slate-700 rounded-lg hover:bg-slate-800/70 transition-all text-sm text-slate-300 hover:text-white"
                >
                  <Eye className="w-4 h-4 inline mr-2" />
                  {example}
                </button>
              ))}
            </div>
          </div>

          {/* –§–æ—Ä–º–∞ */}
          <div className="bg-slate-800/50 border border-slate-700 rounded-xl p-8">
            <div className="space-y-6">
              {/* –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ */}
              <div>
                <label className="block text-sm font-medium text-slate-300 mb-3">
                  –û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –∑–∞–¥–∞—á—É
                </label>
                <textarea
                  value={taskDescription}
                  onChange={(e) => setTaskDescription(e.target.value)}
                  placeholder="–î–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—à–∏—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏–ª–∏ —Ä–µ—à–∏—Ç—å –≤ 1–°..."
                  className="w-full h-32 px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                />
              </div>

              {/* –í—ã–±–æ—Ä —Ä–æ–ª–∏ */}
              <div>
                <label className="block text-sm font-medium text-slate-300 mb-3">
                  –í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
                </label>
                <div className="grid grid-cols-2 md:grid-cols-5 gap-3">
                  {roles.map((role) => (
                    <button
                      key={role.id}
                      onClick={() => setSelectedRole(role.id)}
                      className={`p-3 rounded-lg border transition-all text-center ${
                        selectedRole === role.id
                          ? 'border-blue-500 bg-blue-600/20 text-blue-300'
                          : 'border-slate-600 bg-slate-900 text-slate-300 hover:border-slate-500'
                      }`}
                    >
                      <div className="text-2xl mb-1">{role.icon}</div>
                      <div className="text-xs">{role.name}</div>
                    </button>
                  ))}
                </div>
              </div>

              {/* –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ */}
              <div className="flex justify-center">
                <button
                  onClick={handleGenerate}
                  disabled={isGenerating || !taskDescription.trim()}
                  className="px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center space-x-2"
                >
                  {isGenerating ? (
                    <Loader2 className="w-5 h-5 animate-spin" />
                  ) : (
                    <Sparkles className="w-5 h-5" />
                  )}
                  <span>
                    {isGenerating ? '–ì–µ–Ω–µ—Ä–∏—Ä—É—é —Ä–µ—à–µ–Ω–∏–µ...' : '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ'}
                  </span>
                </button>
              </div>
            </div>
          </div>

          {/* –≠—Ç–∞–ø—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ */}
          {generationSteps.length > 0 && (
            <div className="mt-8 bg-slate-800/50 border border-slate-700 rounded-xl p-6">
              <h3 className="text-lg font-semibold text-white mb-4">–≠—Ç–∞–ø—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:</h3>
              <div className="space-y-3">
                {generationSteps.map((step) => (
                  <div key={step.id} className="flex items-center space-x-3">
                    <div className={`w-6 h-6 rounded-full flex items-center justify-center ${
                      step.completed ? 'bg-green-600' : 'bg-slate-600'
                    }`}>
                      {step.completed && <Target className="w-4 h-4 text-white" />}
                    </div>
                    <div>
                      <div className="text-white font-medium">{step.title}</div>
                      <div className="text-slate-400 text-sm">{step.description}</div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */}
          {generatedFiles.length > 0 && (
            <div className="mt-8">
              <h3 className="text-lg font-semibold text-white mb-6">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {generatedFiles.map((file) => (
                  <div key={file.id} className="bg-slate-800/50 border border-slate-700 rounded-xl p-6">
                    <div className="flex items-center justify-between mb-4">
                      <div className="flex items-center space-x-3">
                        <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${
                          file.type === 'code' ? 'bg-green-600/20 text-green-400' :
                          file.type === 'document' ? 'bg-blue-600/20 text-blue-400' :
                          'bg-purple-600/20 text-purple-400'
                        }`}>
                          {file.type === 'code' ? <Code className="w-5 h-5" /> :
                           file.type === 'document' ? <FileText className="w-5 h-5" /> :
                           <BarChart3 className="w-5 h-5" />}
                        </div>
                        <div>
                          <h4 className="text-white font-medium">{file.title}</h4>
                          <p className="text-slate-400 text-sm">{file.size}</p>
                        </div>
                      </div>
                    </div>
                    
                    <div className="mb-4">
                      <div className="text-slate-300 text-sm font-mono bg-slate-900 p-3 rounded border">
                        {file.content.substring(0, 150)}...
                      </div>
                    </div>

                    <button
                      onClick={() => handleDownload(file)}
                      className="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center space-x-2"
                    >
                      <Download className="w-4 h-4" />
                      <span>–°–∫–∞—á–∞—Ç—å</span>
                    </button>
                  </div>
                ))}
              </div>
            </div>
          )}
        </div>
      )}
    </div>
  );
};

export default CustomScenarioSection;