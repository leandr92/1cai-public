# ═══════════════════════════════════════════════════════════════════════════
# 1C AI Stack - Environment Configuration Example
# ═══════════════════════════════════════════════════════════════════════════
#
# 📝 Инструкция:
#    1. Скопируйте этот файл: cp env.example .env
#    2. Заполните необходимые значения (отмеченные как REQUIRED)
#    3. Опциональные параметры можно оставить закомментированными
#
# ═══════════════════════════════════════════════════════════════════════════

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 🤖 TELEGRAM BOT (ОБЯЗАТЕЛЬНО для Telegram интерфейса)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Токен бота от @BotFather
# Получить: https://t.me/BotFather → /newbot
TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather

# ID администраторов (через запятую)
# Получить свой ID: https://t.me/userinfobot
TELEGRAM_ADMIN_IDS=

# ID premium пользователей (расширенные лимиты)
TELEGRAM_PREMIUM_IDS=

# Rate limiting
TELEGRAM_RATE_LIMIT_MIN=10
TELEGRAM_RATE_LIMIT_DAY=100

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 🗄️ DATABASES (ОБЯЗАТЕЛЬНО)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# PostgreSQL
POSTGRES_DB=knowledge_base
POSTGRES_USER=admin
POSTGRES_PASSWORD=changeme
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Database URL для приложения (автоформат)
DATABASE_URL=postgresql://admin:changeme@localhost:5432/knowledge_base

# PgAdmin (опционально, только для dev)
PGADMIN_EMAIL=admin@1c-ai.local
PGADMIN_PASSWORD=admin

# Redis (обязательно)
REDIS_HOST=localhost
REDIS_PORT=6379

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 🔗 GRAPH & VECTOR DATABASES (ОПЦИОНАЛЬНО для MVP)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Neo4j (граф зависимостей - опционально)
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# Qdrant (векторный поиск - опционально)
QDRANT_HOST=localhost
QDRANT_PORT=6333

# Elasticsearch (полнотекстовый поиск - не рекомендуется для MVP)
# ELASTICSEARCH_HOST=localhost
# ELASTICSEARCH_PORT=9200

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 🤖 AI SERVICES (ОПЦИОНАЛЬНО)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# OpenAI (для GPT-4, Whisper STT, DALL-E)
# Получить: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key

# Anthropic Claude
# Получить: https://console.anthropic.com/
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key

# Ollama (локальные LLM модели)
OLLAMA_HOST=localhost
OLLAMA_PORT=11434

# GigaChat (Sber AI)
# GIGACHAT_API_KEY=your_gigachat_token

# YandexGPT
# YANDEX_API_KEY=your_yandex_api_key
# YANDEX_FOLDER_ID=your_folder_id

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 🔐 SECURITY & AUTH
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# JWT Secret (генерируйте случайную строку перед деплоем)
# Генерация: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET=
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
# AUTH_DEMO_USERS можно задать JSON-строкой, чтобы переопределить демо-аккаунты
# Пример формата: [{"username":"admin","password":"***","user_id":"admin-1","roles":["admin"],"permissions":["marketplace:approve"]}]
AUTH_DEMO_USERS=
# Service-to-service API tokens (JSON)
SERVICE_API_TOKENS=[{"name":"internal-automation","token":"change_me","roles":["service"],"permissions":["marketplace:submit"]}]
# Audit log (JSON Lines)
AUDIT_LOG_PATH=logs/security_audit.log

# Session Secret
SESSION_SECRET=your-session-secret-change-this

# API Keys для внешних интеграций
API_KEY_SALT=your-api-key-salt

# Rate limiting for API (JWT-based users)
USER_RATE_LIMIT_PER_MINUTE=60
USER_RATE_LIMIT_WINDOW_SECONDS=60
MARKETPLACE_CACHE_REFRESH_MINUTES=15

# Rate limiting для Telegram (по умолчанию)
TELEGRAM_RATE_LIMIT_MIN=10
TELEGRAM_RATE_LIMIT_DAY=100
TELEGRAM_HTTP_TIMEOUT=10

# Object Storage (S3 compatible)
AWS_S3_BUCKET=
AWS_S3_REGION=
AWS_S3_ENDPOINT=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_DEFAULT_BUCKET=onecai-artifacts

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 🌐 APPLICATION SETTINGS
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Application
APP_ENV=development
APP_DEBUG=true
APP_NAME=1C AI Stack
APP_VERSION=5.1.0

# FastAPI
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# CORS
CORS_ORIGINS=["http://localhost:3000","http://localhost:5173","http://localhost:8080"]

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 📱 OCR SERVICES (ОПЦИОНАЛЬНО для распознавания документов)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# DeepSeek OCR (основной, 91%+ accuracy)
# DEEPSEEK_API_KEY=your_deepseek_api_key

# Google Vision API (опционально, fallback)
# GOOGLE_VISION_API_KEY=your_google_vision_key

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 📊 MONITORING & METRICS (ОПЦИОНАЛЬНО)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_ADMIN_PASSWORD=admin

# Sentry (опционально для production)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 🔧 1C MCP SERVER (ОПЦИОНАЛЬНО для интеграции с 1C)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Настройки подключения к 1С
# MCP_ONEC_URL=http://localhost/your_base_name
# MCP_ONEC_USERNAME=your_username
# MCP_ONEC_PASSWORD=your_password
# MCP_ONEC_SERVICE_ROOT=mcp

# Настройки MCP-сервера
# MCP_HOST=127.0.0.1
# MCP_PORT=6001
# MCP_SERVER_NAME=1C-MCP-Proxy
# MCP_LOG_LEVEL=INFO

# OAuth2 (опционально)
# MCP_AUTH_MODE=none
# MCP_PUBLIC_URL=https://your-mcp-proxy.example.com

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 🚀 DEPLOYMENT (PRODUCTION)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# AWS (если используете)
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=your-bucket-name

# Azure (если используете)
# AZURE_STORAGE_CONNECTION_STRING=your_connection_string
# AZURE_CONTAINER_NAME=your-container

# Docker
COMPOSE_PROJECT_NAME=1c-ai-stack

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 🧪 TESTING (DEVELOPMENT)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Test Database
TEST_DATABASE_URL=postgresql://admin:changeme@localhost:5432/test_db

# Pytest
PYTEST_TIMEOUT=300

# ═══════════════════════════════════════════════════════════════════════════
# 📖 DOCUMENTATION
# ═══════════════════════════════════════════════════════════════════════════
#
# Минимальная конфигурация для запуска (MVP):
#   ✅ TELEGRAM_BOT_TOKEN - для Telegram Bot
#   ✅ POSTGRES_PASSWORD - для PostgreSQL
#   ✅ DATABASE_URL - строка подключения к БД
#
# Рекомендуемая конфигурация для development:
#   + Все из минимальной
#   + OPENAI_API_KEY - для AI функций
#   + NEO4J_PASSWORD - для графа зависимостей (опционально)
#
# Production конфигурация:
#   + Все из development
#   + JWT_SECRET - сгенерированный случайно
#   + SESSION_SECRET - сгенерированный случайно
#   + SENTRY_DSN - для мониторинга ошибок
#   + AWS/Azure креденшиалы - для хранилища
#
# Подробная документация:
#   - README.md - общая информация
#   - docs/02-architecture/PROJECT_SUMMARY.md - что реально работает
#   - docs/01-getting-started/ - инструкции по запуску
#
# ═══════════════════════════════════════════════════════════════════════════

