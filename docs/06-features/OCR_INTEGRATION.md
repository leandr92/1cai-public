# üì∏ OCR Integration - DeepSeek-OCR

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ Telegram Bot**

> ‚úÖ **–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production

---

## üéØ –ß—Ç–æ —ç—Ç–æ?

**OCR (Optical Character Recognition)** - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ PDF.

**DeepSeek-OCR** - state-of-the-art –º–æ–¥–µ–ª—å –æ—Ç DeepSeek, –æ—Å–æ–±–µ–Ω–Ω–æ —Ö–æ—Ä–æ—à–∞ –¥–ª—è:
- ‚úÖ **–¢–∞–±–ª–∏—Ü** (91%+ —Ç–æ—á–Ω–æ—Å—Ç—å - –ª—É—á—à–∞—è –Ω–∞ —Ä—ã–Ω–∫–µ!)
- ‚úÖ **–§–æ—Ä–º –∏ –±–ª–∞–Ω–∫–æ–≤ 1–°**
- ‚úÖ **–†—É–∫–æ–ø–∏—Å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞**
- ‚úÖ **–°—Ç–∞—Ä—ã—Ö –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
- ‚úÖ **–ú–Ω–æ–≥–æ–∫–æ–ª–æ–Ω–æ—á–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
- ‚úÖ **–ú–µ–ª–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞**

**–õ—É—á—à–µ —á–µ–º GPT-4o, Gemini –∏ Chandra –ø–æ OCR!** (—Å–º. benchmarks –Ω–∏–∂–µ)

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í Telegram Bot:

**1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
```
üì∏ –°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ç–æ –¥–æ–≥–æ–≤–æ—Ä–∞/–Ω–∞–∫–ª–∞–¥–Ω–æ–π/–∞–∫—Ç–∞
‚Üì
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –±–æ—Ç
‚Üì
–ë–æ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Ç–µ–∫—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
```

**2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å PDF —Ñ–∞–π–ª:**
```
üìÑ –û—Ç–ø—Ä–∞–≤—å—Ç–µ PDF –¥–æ–∫—É–º–µ–Ω—Ç
‚Üì
–ë–æ—Ç –∏–∑–≤–ª–µ—á–µ—Ç –≤–µ—Å—å —Ç–µ–∫—Å—Ç
```

**3. –£–∫–∞–∑–∞—Ç—å —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```
Caption: "–¥–æ–≥–æ–≤–æ—Ä"
‚Üì
AI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ—á–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
- –ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞
- –î–∞—Ç–∞
- –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç
- –°—É–º–º–∞
```

---

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

| –¢–∏–ø | –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –≤ caption | –ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è |
|-----|-------------------------|-----------------|
| **–î–æ–≥–æ–≤–æ—Ä** | "–¥–æ–≥–æ–≤–æ—Ä", "contract" | –ù–æ–º–µ—Ä, –¥–∞—Ç–∞, –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç, –ø—Ä–µ–¥–º–µ—Ç, —Å—É–º–º–∞ |
| **–°—á–µ—Ç** | "—Å—á–µ—Ç", "invoice" | –ù–æ–º–µ—Ä, –¥–∞—Ç–∞, –ø–æ—Å—Ç–∞–≤—â–∏–∫, –ø–æ–∫—É–ø–∞—Ç–µ–ª—å, —Å—É–º–º–∞, –ù–î–°, —Ç–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ |
| **–ù–∞–∫–ª–∞–¥–Ω–∞—è** | "–Ω–∞–∫–ª–∞–¥–Ω–∞—è", "waybill" | –ù–æ–º–µ—Ä, –¥–∞—Ç–∞, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å, –ø–æ–ª—É—á–∞—Ç–µ–ª—å, —Ç–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ |
| **–ê–∫—Ç** | "–∞–∫—Ç", "act" | –ù–æ–º–µ—Ä, –¥–∞—Ç–∞, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, —Ä–∞–±–æ—Ç—ã/—É—Å–ª—É–≥–∏ |
| **–§–æ—Ä–º–∞** | "—Ñ–æ—Ä–º–∞", "form" | –í—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã |
| **–¢–∞–±–ª–∏—Ü–∞** | "—Ç–∞–±–ª–∏—Ü–∞", "table" | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã |
| **–ê–≤—Ç–æ** | (–±–µ–∑ caption) | –û–±—â–µ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ |

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –î–æ–≥–æ–≤–æ—Ä

**–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ:**
```
üì∏ –§–æ—Ç–æ –¥–æ–≥–æ–≤–æ—Ä–∞
Caption: "–¥–æ–≥–æ–≤–æ—Ä"
```

**–ü–æ–ª—É—á–∞–µ—Ç–µ:**
```
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω!

üìä –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 87.5%
üìù –°–∏–º–≤–æ–ª–æ–≤: 1250

–ò–∑–≤–ª–µ—á–µ–Ω–æ:
‚Ä¢ –ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞: 123-–ö/24
‚Ä¢ –î–∞—Ç–∞: 01.11.2024
‚Ä¢ –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç: –û–û–û "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞"
‚Ä¢ –°—É–º–º–∞: 150,000.00 —Ä—É–±

–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:
[–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞...]

üí° –ß—Ç–æ –¥–∞–ª—å—à–µ?
‚Ä¢ –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç
‚Ä¢ –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É
‚Ä¢ –ü–æ–ø—Ä–æ—Å–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 1–°
```

---

### –ü—Ä–∏–º–µ—Ä 2: –ù–∞–∫–ª–∞–¥–Ω–∞—è —Å —Ç–∞–±–ª–∏—Ü–µ–π

**–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ:**
```
üì∏ –§–æ—Ç–æ –Ω–∞–∫–ª–∞–¥–Ω–æ–π
Caption: "–Ω–∞–∫–ª–∞–¥–Ω–∞—è"
```

**–ü–æ–ª—É—á–∞–µ—Ç–µ:**
```
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω!

–ò–∑–≤–ª–µ—á–µ–Ω–æ:
‚Ä¢ –ù–æ–º–µ—Ä: –¢–ù-45678
‚Ä¢ –î–∞—Ç–∞: 02.11.2024
‚Ä¢ –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å: –û–û–û "–ü–æ—Å—Ç–∞–≤—â–∏–∫"
‚Ä¢ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: –û–û–û "–ü–æ–∫—É–ø–∞—Ç–µ–ª—å"

–¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤:
1. –¢–æ–≤–∞—Ä –ê - 10 —à—Ç - 1,500.00 —Ä—É–±
2. –¢–æ–≤–∞—Ä –ë - 5 —à—Ç - 3,000.00 —Ä—É–±
3. –¢–æ–≤–∞—Ä –í - 20 —à—Ç - 500.00 —Ä—É–±

–ò—Ç–æ–≥–æ: 40,000.00 —Ä—É–±
```

---

### –ü—Ä–∏–º–µ—Ä 3: –°—Ç–∞—Ä—ã–π —Å–∫–∞–Ω (–ø–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)

**Chandra —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ–±—É—á–µ–Ω –¥–ª—è:**
- –°—Ç–∞—Ä—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ü–ª–æ—Ö–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∫–∞–Ω–æ–≤
- –†–∞–∑–º—ã—Ç—ã—Ö —Ñ–æ—Ç–æ
- –ù–∏–∑–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

**–í—Å–µ —Ä–∞–≤–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç!** (—Ö–æ—Ç—è confidence –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∏–∂–µ)

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

```
Telegram ‚Üí –§–æ—Ç–æ/PDF
    ‚Üì
OCRService (–Ω–∞—à wrapper)
    ‚Üì
Chandra OCR (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞) ‚Üí –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
    ‚Üì
AI Orchestrator ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    ‚Üì
–û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã OCR:

**1. Chandra HF (default):**
- –¢–æ—á–Ω–æ—Å—Ç—å: 83% (best in class)
- –°–∫–æ—Ä–æ—Å—Ç—å: 2-5 —Å–µ–∫/—Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –¢—Ä–µ–±—É–µ—Ç: GPU –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ (–∏–ª–∏ cloud)

**2. Chandra vLLM (faster):**
- –¢–æ—á–Ω–æ—Å—Ç—å: 83%
- –°–∫–æ—Ä–æ—Å—Ç—å: 1-2 —Å–µ–∫/—Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –¢—Ä–µ–±—É–µ—Ç: vLLM server –∑–∞–ø—É—â–µ–Ω

**3. Tesseract (fallback):**
- –¢–æ—á–Ω–æ—Å—Ç—å: 60-70%
- –°–∫–æ—Ä–æ—Å—Ç—å: 1 —Å–µ–∫/—Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –¢—Ä–µ–±—É–µ—Ç: tesseract —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ Chandra –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:

| –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –†–∞–∑–º–µ—Ä | Chandra HF | Chandra vLLM |
|---------------|--------|------------|--------------|
| –§–æ—Ç–æ (1 —Å—Ç—Ä) | 2MB | 3-5 —Å–µ–∫ | 1-2 —Å–µ–∫ |
| PDF (5 —Å—Ç—Ä) | 5MB | 15-25 —Å–µ–∫ | 5-10 —Å–µ–∫ |
| PDF (20 —Å—Ç—Ä) | 20MB | 60-100 —Å–µ–∫ | 20-40 —Å–µ–∫ |

**–î–ª—è –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:
```
‚è±Ô∏è –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: ~45 —Å–µ–∫—É–Ω–¥
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...
```

---

## üéÅ Premium Features

**Free tier:**
- 10 OCR —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–π/–¥–µ–Ω—å
- –î–æ 5 —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
- –ë–∞–∑–æ–≤–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å

**Premium ($4/–º–µ—Å):**
- –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ OCR –∑–∞–ø—Ä–æ—Å—ã
- –î–æ 50 —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–±—ã—Å—Ç—Ä–µ–µ)
- AI –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤–∫–ª—é—á–µ–Ω

**Enterprise:**
- Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ (1000+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
- Email integration
- –ü—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ 1–°
- Custom models

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏:

1. ‚úÖ –§–æ—Ç–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –≤–æ **–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª**
2. ‚úÖ –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —É–¥–∞–ª—è–µ—Ç—Å—è**
3. ‚úÖ –í –ª–æ–≥–∞—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (–Ω–µ —Ç–µ–∫—Å—Ç)
4. ‚úÖ Chandra —Ä–∞–±–æ—Ç–∞–µ—Ç **–ª–æ–∫–∞–ª—å–Ω–æ** (–¥–∞–Ω–Ω—ã–µ –Ω–µ —É—Ö–æ–¥—è—Ç –∫ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º)

**vs OpenAI/Google:**
- OpenAI OCR –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∏—Ö —Å–µ—Ä–≤–µ—Ä—ã ‚ùå
- Chandra –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ ‚úÖ
- **100% –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å!**

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements-telegram.txt

# –í–∫–ª—é—á–∞–µ—Ç:
# - chandra-ocr>=0.1.0
```

### –î–ª—è production:

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Chandra
pip install chandra-ocr

# 2. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–ø—É—Å—Ç–∏—Ç—å vLLM server –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
chandra_vllm

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
OCR_PROVIDER=chandra_hf  # –∏–ª–∏ chandra_vllm
OCR_ENABLE_AI_PARSING=true

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
docker-compose restart telegram-bot
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest tests/test_ocr_service.py -v

# –¢–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ (–±–µ–∑ Chandra)
pytest tests/test_ocr_service.py -v -m "not slow"

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã (–±–µ–∑ integration)
pytest tests/test_ocr_service.py -v -m "not integration"
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```python
from src.services.ocr_service import quick_ocr, ocr_with_structure, DocumentType

# –ü—Ä–æ—Å—Ç–æ–µ OCR
text = await quick_ocr("path/to/image.jpg")
print(text)

# –° AI –ø–∞—Ä—Å–∏–Ω–≥–æ–º
result = await ocr_with_structure(
    "path/to/contract.pdf",
    document_type=DocumentType.CONTRACT
)

print(result["text"])
print(result["structured_data"])
```

---

## üìä Benchmarks (Chandra)

**–ò—Å—Ç–æ—á–Ω–∏–∫:** https://github.com/datalab-to/chandra

| –ú–æ–¥–µ–ª—å | Overall | Tables | Old Scans | Handwriting |
|--------|---------|--------|-----------|-------------|
| **Chandra** | **83.1%** | **88.0%** | **50.4%** | **80.3%** |
| GPT-4o | 69.9% | 70.0% | 40.7% | 74.5% |
| Gemini Flash 2 | 63.8% | 72.1% | 34.2% | 56.1% |
| Qwen 3 VL | 64.6% | 45.6% | 37.5% | 75.1% |

**Chandra - –õ–£–ß–®–ò–ô –≤—ã–±–æ—Ä –¥–ª—è 1–° –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤!**

---

## üîÆ Roadmap

### Q1 2025 (—É–∂–µ –≥–æ—Ç–æ–≤–æ):
- [x] –ë–∞–∑–æ–≤–∞—è OCR –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] Telegram Bot handlers (—Ñ–æ—Ç–æ + PDF)
- [x] AI –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [x] Unit —Ç–µ—Å—Ç—ã
- [ ] Beta —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### Q2 2025:
- [ ] Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è Enterprise
- [ ] Email integration (–∞–≤—Ç–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π)
- [ ] –ü—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ 1–° (API)
- [ ] Fine-tuning –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º

### Q3 2025:
- [ ] Custom templates (—à–∞–±–ª–æ–Ω—ã —Ñ–æ—Ä–º)
- [ ] Auto-categorization (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞)
- [ ] Multi-document workflows
- [ ] OCR + RPA integration

---

## üí° Business Value

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

**–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏:**
- –í–≤–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤—Ä—É—á–Ω—É—é: ~5-10 –º–∏–Ω—É—Ç
- OCR + AI –ø–∞—Ä—Å–∏–Ω–≥: ~30 —Å–µ–∫—É–Ω–¥
- **–≠–∫–æ–Ω–æ–º–∏—è: 90%+ –≤—Ä–µ–º–µ–Ω–∏**

**–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫:**
- –†—É—á–Ω–æ–π –≤–≤–æ–¥: 2-5% –æ—à–∏–±–æ–∫ (–æ–ø–µ—á–∞—Ç–∫–∏, –ø—Ä–æ–ø—É—Å–∫–∏)
- OCR: 83%+ —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- AI –≤–∞–ª–∏–¥–∞—Ü–∏—è: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ–π

**–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ú–∏–≥—Ä–∞—Ü–∏—è –∞—Ä—Ö–∏–≤–æ–≤ –≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –≤–∏–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

**Use cases:**
- –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è: —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤–≤–æ–¥–∞ –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –°–∫–ª–∞–¥: –±—ã—Å—Ç—Ä–∞—è –ø—Ä–∏–µ–º–∫–∞ –ø–æ –Ω–∞–∫–ª–∞–¥–Ω—ã–º
- –î–æ–≥–æ–≤–æ—Ä–Ω–æ–π –æ—Ç–¥–µ–ª: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –∏–∑ —Å–∫–∞–Ω–æ–≤
- –ê—Ä—Ö–∏–≤—ã: –æ—Ü–∏—Ñ—Ä–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

---

## üÜö –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

**–û—Ç–ª–∏—á–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö OCR —Ä–µ—à–µ–Ω–∏–π:**

**ABBYY FineReader:**
- ‚ùå –î–æ—Ä–æ–≥–æ–π
- ‚ùå –°–ª–æ–∂–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (–Ω–æ –±–µ–∑ AI –ø–∞—Ä—Å–∏–Ω–≥–∞)

**Google Cloud Vision / AWS Textract:**
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ cloud
- ‚ùå –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ API –≤—ã–∑–æ–≤—ã
- ‚úÖ –•–æ—Ä–æ—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å

**–ù–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:**
- ‚úÖ Open Source (MIT License)
- ‚úÖ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (zero setup)
- ‚úÖ AI –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è 1–° –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ Chandra OCR (83% —Ç–æ—á–Ω–æ—Å—Ç—å - state-of-the-art)
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π deployment (data privacy)

**–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ!** üèÜ

---

## üêõ Troubleshooting

### "Chandra not installed"

```bash
pip install chandra-ocr
```

### "Low confidence (<50%)"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ
- –°–ª–∏—à–∫–æ–º –º–µ–ª–∫–∏–π —Ç–µ–∫—Å—Ç
- –†—É–∫–æ–ø–∏—Å–Ω—ã–π —Ç–µ–∫—Å—Ç (—Å–ª–æ–∂–Ω–µ–µ)

**–†–µ—à–µ–Ω–∏—è:**
- –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏
- –ë–ª–∏–∂–µ –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É
- –í—ã—Ä–æ–≤–Ω—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç

### "Processing too slow"

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ vLLM –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
chandra_vllm

# –ò–ª–∏ –≤ .env
OCR_PROVIDER=chandra_vllm
```

---

## üìû Support

**–í–æ–ø—Ä–æ—Å—ã –ø–æ OCR:**
- GitHub: [Issues](https://github.com/DmitrL-dev/1cai-public/issues) —Å —Ç–µ–≥–æ–º `ocr`
- Chandra docs: https://github.com/datalab-to/chandra

---

## üìö –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### Python API:

```python
from src.services.ocr_service import get_ocr_service, DocumentType

# –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä–≤–∏—Å
ocr = get_ocr_service()

# –ü—Ä–æ—Å—Ç–æ–µ OCR
result = await ocr.process_image("contract.jpg")
print(result.text)

# –° –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
result = await ocr.process_image(
    "invoice.pdf",
    document_type=DocumentType.INVOICE
)

# –ë—É–¥–µ—Ç AI –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
print(result.structured_data)
# {
#   "–Ω–æ–º–µ—Ä": "–°–§-12345",
#   "–¥–∞—Ç–∞": "01.11.2024",
#   "—Å—É–º–º–∞": "50000.00",
#   ...
# }
```

### Batch processing:

```python
# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞–ø–∫—É —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
file_paths = [
    "doc1.pdf",
    "doc2.jpg",
    "doc3.png"
]

results = await ocr.batch_process(file_paths)

for result in results:
    print(f"File: {result.metadata['image_path']}")
    print(f"Text: {result.text[:100]}...")
    print(f"Confidence: {result.confidence:.2f}")
    print()
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```
1. OCRService (src/services/ocr_service.py)
   ‚îî‚îÄ Wrapper –Ω–∞–¥ Chandra
   ‚îî‚îÄ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   ‚îî‚îÄ AI –ø–∞—Ä—Å–∏–Ω–≥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

2. Telegram Handlers (src/telegram/handlers.py)
   ‚îî‚îÄ handle_photo() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ
   ‚îî‚îÄ handle_document() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF
   
3. AI Orchestrator (src/ai/orchestrator.py)
   ‚îî‚îÄ –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   ‚îî‚îÄ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤

4. Chandra OCR (–≤–Ω–µ—à–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
   ‚îî‚îÄ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ pip install
   ‚îî‚îÄ –ù–ï —Ñ–æ—Ä–∫–∞–µ–º! –ò—Å–ø–æ–ª—å–∑—É–µ–º as-is
```

### Workflow:

```
User ‚Üí Telegram ‚Üí –§–æ—Ç–æ
    ‚Üì
Telegram Bot (handle_photo)
    ‚Üì
OCRService.process_image()
    ‚Üì
Chandra.process_document() ‚Üí –¢–µ–∫—Å—Ç
    ‚Üì
AI Orchestrator ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    ‚Üì
OCRResult (—Ç–µ–∫—Å—Ç + —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
    ‚Üì
–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º:

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ OCR –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
- –°—Ä–µ–¥–Ω–∏–π confidence score
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –û—à–∏–±–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (p50, p95, p99)

### Prometheus metrics:

```python
ocr_requests_total
ocr_processing_duration_seconds
ocr_confidence_score
ocr_errors_total
```

---

## üéØ Use Cases –¥–ª—è 1–° –∫–æ–º–ø–∞–Ω–∏–π

### 1. –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è:
- –°–∫–∞–Ω —Å—á–µ—Ç–æ–≤ ‚Üí –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –§–æ—Ç–æ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö ‚Üí –≤–≤–æ–¥ –≤ –±–∞–∑—É
- PDF –∞–∫—Ç–æ–≤ ‚Üí —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

### 2. –î–æ–≥–æ–≤–æ—Ä–Ω–æ–π –æ—Ç–¥–µ–ª:
- –°–∫–∞–Ω—ã –¥–æ–≥–æ–≤–æ—Ä–æ–≤ ‚Üí –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏
- –ü–æ–∏—Å–∫ —Ä–∏—Å–∫–æ–≤ –≤ —É—Å–ª–æ–≤–∏—è—Ö

### 3. –°–∫–ª–∞–¥:
- –§–æ—Ç–æ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö ‚Üí –ø—Ä–∏–µ–º–∫–∞ —Ç–æ–≤–∞—Ä–∞
- –°–≤–µ—Ä–∫–∞ —Å –∑–∞–∫–∞–∑–æ–º
- –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è

### 4. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
- –ê—Ä—Ö–∏–≤—ã –±—É–º–∞–∂–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- Legacy —Å–∏—Å—Ç–µ–º—ã (PDF –≤—ã–≥—Ä—É–∑–∫–∏)
- Excel —Ç–∞–±–ª–∏—Ü—ã —Å –ø–ª–æ—Ö–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

---

## üíé –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

**–ù–∞—à–µ –£–ü (Unique Proposition):**

```
Telegram Bot
    +
–ì–æ–ª–æ—Å–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—É–∂–µ –µ—Å—Ç—å)
    +
OCR –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (Chandra)
    +
AI –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    +
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–°
    =
–ù–ò–ö–¢–û –¢–ê–ö–û–ì–û –ù–ï –î–ï–õ–ê–ï–¢! üöÄ
```

**–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã:**
- ABBYY: OCR –±–µ–∑ AI –±–µ–∑ 1–°
- Google/AWS: OCR –±–µ–∑ Telegram –±–µ–∑ 1–°
- 1–° —Ä–µ—à–µ–Ω–∏—è: –Ω–µ—Ç OCR –Ω–µ—Ç AI

**–ú—ã: ALL-IN-ONE!**

---

## ‚úÖ –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [x] OCRService —Å–æ–∑–¥–∞–Ω
- [x] Chandra integration
- [x] Telegram handlers (photo + PDF)
- [x] AI parsing —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [x] Unit —Ç–µ—Å—Ç—ã
- [x] Requirements updated
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] Integration —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Beta testing
- [ ] Production deploy

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 90%** ‚úÖ

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –°–µ–≥–æ–¥–Ω—è:
1. ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
2. [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å unit —Ç–µ—Å—Ç—ã
3. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é

### –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ:
1. [ ] Beta —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
2. [ ] –°–±–æ—Ä feedback
3. [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è accuracy

### –í —Å–ª–µ–¥—É—é—â–µ–º –º–µ—Å—è—Ü–µ:
1. [ ] Production deploy
2. [ ] Marketing (OCR feature announcement)
3. [ ] Enterprise pilots

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2024-11-05  
**–ê–≤—Ç–æ—Ä:** 1C AI Stack Team  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Ready for Testing

