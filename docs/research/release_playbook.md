# Release Playbook

> Обновлено: 10 ноября 2025

## 1. Подготовка релиза

1. Убедитесь, что `main` чистый и CI зелёный.
2. Обновите документацию (README, CHANGELOG) и убедитесь, что `feature-validate` проходит.
3. Запустите скрипт генерации релиза:

```bash
python scripts/release/create_release.py --version v5.2.0
```

Скрипт:
- найдёт предыдущий тег,
- соберёт список коммитов,
- добавит блок в `RELEASE_NOTES.md`.

4. Проверьте содержимое `RELEASE_NOTES.md`, отредактируйте описание при необходимости.
5. Скоммитьте изменённые файлы и запушьте в `main`.

## 2. Создание тега и публикация

```bash
python scripts/release/create_release.py --version v5.2.0 --tag --push
```

Параметр `--tag` создаёт аннотированный тег, `--push` отправляет его в `origin`.

После пуша тег запускает workflow `.github/workflows/release.yml`, который:
- повторно гарантирует наличие `RELEASE_NOTES.md`,
- публикует GitHub Release с этими заметками.

## 3. Пост-релизные шаги

- Обновите `docs/status/` (если ведём статус) и сообщите в командный канал.
- Проверьте workflow `Release` в Actions — убедитесь, что релиз опубликован.
- При необходимости создайте issue для следующего релиза (технический долг, улучшения).

## 4. GitOps / дальнейшая автоматизация

- Следующий этап — объединить release-теги с GitOps/ArgoCD (релизы = источник истины для деплоя).
- Рассмотреть автоматическую генерацию Build-артефактов (`make release-build`) и прикладывать к релизу.

## 5. Резервное копирование

- Скрипты `scripts/windows/feature-init.ps1`, `scripts/windows/feature-validate.ps1` помогают воспроизвести релизные шаги на Windows.
- Все шаги выполняются без админ-прав; для безопасности используйте ограниченный аккаунт (см. `docs/research/constitution.md`).

