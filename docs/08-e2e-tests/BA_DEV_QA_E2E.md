# üîÅ E2E —Å—Ü–µ–Ω–∞—Ä–∏–π: BA ‚Üí Developer AI Secure ‚Üí QA Engineer AI

**–¶–µ–ª—å:** –ø–æ–∫–∞–∑–∞—Ç—å —Å–∫–≤–æ–∑–Ω–æ–π –ø–æ—Ç–æ–∫ –æ—Ç –±–∏–∑–Ω–µ—Å‚Äë—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–æ –∫–æ–¥–∞ –∏ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ —Ç—Ä–∏ –∞–≥–µ–Ω—Ç–∞:

- Business Analyst (—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π),
- Developer AI Secure (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ —Å Rule‚Äëof‚ÄëTwo),
- QA Engineer AI (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç—ã –∏ –æ—Ü–µ–Ω–∫—É –ø–æ–∫—Ä—ã—Ç–∏—è).

---

## 1. –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. **BA Agent** –ø–æ–ª—É—á–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´—Ä–∞—Å—á—ë—Ç —Å–∫–∏–¥–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞¬ª), –æ–±–æ–≥–∞—â–∞–µ—Ç –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.
2. **Developer AI Secure** –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç BSL‚Äë–∫–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞—è draft + `token` (Rule‚Äëof‚ÄëTwo).
3. **QA Engineer AI** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –∏ —Å—Ç—Ä–æ–∏—Ç –º–∞—Ç—Ä–∏—Ü—É —Ç–µ—Å—Ç–æ–≤: unit, Vanessa BDD, negative —Å—Ü–µ–Ω–∞—Ä–∏–∏.
4. –í –ø—Ä–æ–¥–µ: —á–µ–ª–æ–≤–µ–∫ —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è (approve), –∫–æ–¥ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Ç–µ—Å—Ç—ã ‚Äï –≤ —Ç–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É.

–í —Ç–µ–∫—É—â–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —ç—Ç–æ –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç—Å—è system‚Äë—Ç–µ—Å—Ç–æ–º —Å –º–æ–∫–∞–º–∏ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö HTTP‚Äë–≤—ã–∑–æ–≤–æ–≤/LLM.

---

## 2. E2E —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ—Ç–æ–∫ (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π)

System‚Äë—Ç–µ—Å—Ç `tests/system/test_e2e_ba_dev_qa.py` –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç –ø—É—Ç—å BA ‚Üí Dev ‚Üí QA:

1. **BA —à–∞–≥**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `ba_requirements`:
     - `business_goal`,
     - `acceptance_criteria`,
     - `business_rules`.
   - –í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç BA‚Äë—Å–µ—Å—Å–∏–∏/BA Agent (`IntegrationConnector` + Jira/Confluence).

2. **Developer AI Secure —à–∞–≥**
   - –ú–æ–∫–∞–µ–º `DeveloperAISecure.generate_code`, —á—Ç–æ–±—ã –æ–Ω:
     - –ø—Ä–∏–Ω–∏–º–∞–ª `ba_requirements`,
     - –≤–æ–∑–≤—Ä–∞—â–∞–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É `{"code": "...BSL...", "token": "secure-token-123", "requires_approval": True}`.
   - –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
     - –Ω–∞–ª–∏—á–∏–µ `requires_approval=True`,
     - –Ω–∞–ª–∏—á–∏–µ `token`,
     - –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å BSL‚Äë–∫–æ–¥–∞ (–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞/—Å—Ç—Ä—É–∫—Ç—É—Ä–∞).

3. **QA Engineer —à–∞–≥**
   - –ú–æ–∫–∞–µ–º `QAEngineerAgentExtended.generate_tests`, —á—Ç–æ–±—ã –Ω–∞ –≤—Ö–æ–¥–µ –ø–æ–ª—É—á–∏—Ç—å BSL‚Äë–∫–æ–¥ –∏ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏,
   - –Ω–∞ –≤—ã—Ö–æ–¥–µ ‚Äï —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
     - `tests.unit_tests`,
     - `tests.vanessa_bdd`,
     - `coverage_estimate`.
   - –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
     - —á—Ç–æ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω unit‚Äë—Ç–µ—Å—Ç,
     - —á—Ç–æ –ø–æ—Å–≤—è—â—ë–Ω–Ω—ã–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç,
     - —á—Ç–æ `coverage_estimate` –≤ —Ä–∞–∑—É–º–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ (`0 < coverage <= 1`).

---

## 3. –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å E2E —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ

```bash
python -m pytest tests/system/test_e2e_ba_dev_qa.py -q
```

–î–ª—è Windows (PowerShell):

```powershell
cd C:\1cAI
python -m pytest tests/system/test_e2e_ba_dev_qa.py -q
```

---

## 4. –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π –≤ –∂–∏–≤–æ–π —Å–∏—Å—Ç–µ–º–µ

**BA ‚Üí Dev ‚Üí QA –≤ CI/CD:**

1. BA –æ—Ñ–æ—Ä–º–ª—è–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –µ–≥–æ –≤ Jira/Confluence —á–µ—Ä–µ–∑ `IntegrationConnector`.
2. Dev –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω:
   - —à–∞–≥ `ba-extract` (—Å–º. `make ba-extract`) –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç,
   - —à–∞–≥ Developer AI Secure –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç patch + `token`,
   - Rule‚Äëof‚ÄëTwo UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç diff –∏ `Approve (token)`.
3. –ü–æ—Å–ª–µ approve:
   - –∫–æ–¥ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è,
   - QA Engineer AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ—Å—Ç—ã –ø–æ –Ω–æ–≤–æ–º—É –º–æ–¥—É–ª—é,
   - e2e‚Äë–ø—Ä–æ–≤–µ—Ä–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, BSL/Vanessa) –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

–≠—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å, –ø–æ–¥–∫–ª—é—á–∞—è SQL Optimizer/TechLogAnalyzer –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Ñ–∏—á–∏.


