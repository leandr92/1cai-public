# Environment: PRODUCTION
ENVIRONMENT=production

# Application Settings
APP_NAME=AI-ассистенты
APP_VERSION=1.0.0
DEBUG=false
LOG_LEVEL=WARNING

# Database Configuration
POSTGRES_DB=ai_assistants
POSTGRES_USER=ai_assistants_prod_user
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}  # Загружается из AWS Secrets Manager
DATABASE_URL=${DATABASE_URL}  # Загружается из AWS Secrets Manager

# Redis Configuration
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=${REDIS_PASSWORD}  # Загружается из AWS Secrets Manager

# API Keys (загружаются из AWS Secrets Manager)
OPENAI_API_KEY=${OPENAI_API_KEY}
SUPABASE_URL=${SUPABASE_URL}
SUPABASE_KEY=${SUPABASE_KEY}
JWT_SECRET_KEY=${JWT_SECRET_KEY}
SECRET_KEY=${SECRET_KEY}

# ===========================================
# Supabase Integration Configuration
# ===========================================
# Включить использование Supabase для облачного backend
USE_SUPABASE=true

# Supabase URLs и ключи (автоматически настраиваются)
SUPABASE_API_URL=${SUPABASE_API_URL}
SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
SUPABASE_SERVICE_ROLE_KEY=${SUPABASE_SERVICE_ROLE_KEY}
SUPABASE_DATABASE_URL=${SUPABASE_DATABASE_URL}

# Настройки интеграции с Supabase
SUPABASE_TIMEOUT=30
SUPABASE_RETRY_ATTEMPTS=3
SUPABASE_ENABLE_REALTIME=true
SUPABASE_ENABLE_STORAGE=true

# ===========================================
# Local Database Configuration (дополнительно к Supabase)
# ===========================================
POSTGRES_LOCAL_DB=ai_assistants_local
POSTGRES_LOCAL_USER=ai_assistants_local_user
POSTGRES_LOCAL_PASSWORD=${POSTGRES_LOCAL_PASSWORD}

# ML Configuration
MLFLOW_ENV_VAR=production
MLFLOW_BACKEND_STORE_URI=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}_mlflow
MLFLOW_ARTIFACT_ROOT=/mlflow/artifacts

# Celery Configuration
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# Monitoring
GRAFANA_PASSWORD=${GRAFANA_PASSWORD}  # Загружается из AWS Secrets Manager
PROMETHEUS_RETENTION_TIME=30d
ALERT_EMAIL=critical-alerts@yourcompany.com

# SMTP Settings (загружаются из AWS Secrets Manager)
SMTP_SERVER=${SMTP_SERVER}
SMTP_PORT=${SMTP_PORT}
SMTP_USERNAME=${SMTP_USERNAME}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_USE_TLS=true

# SSL Configuration
SSL_CERT_PATH=/etc/nginx/ssl/fullchain.pem
SSL_KEY_PATH=/etc/nginx/ssl/privkey.pem

# Rate Limiting (более строгие лимиты для production)
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=500

# Cache Settings
CACHE_TTL=7200
CACHE_MAX_SIZE=5000

# Health Check Settings
HEALTH_CHECK_TIMEOUT=15
HEALTH_CHECK_RETRIES=5

# Security Settings (строгие настройки для production)
CORS_ORIGINS=https://yourcompany.com
ALLOWED_HOSTS=yourcompany.com,api.yourcompany.com
SECURE_SSL_REDIRECT=true
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=true
SECURE_HSTS_PRELOAD=true

# Resource Limits
MAX_WORKERS=8
MAX_MEMORY=2G
MAX_CPU=2

# Backup Settings (строгие настройки резервного копирования)
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=90
S3_BACKUP_BUCKET=ai-assistants-production-backups
S3_BACKUP_PREFIX=production/
BACKUP_ENCRYPTION=true

# Database Performance Settings
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=512MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB

# Security Headers
CONTENT_SECURITY_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
REFERER_POLICY=strict-origin-when-cross-origin

# Feature Flags (консервативные настройки для production)
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_ML_TRAINING=false
FEATURE_RATE_LIMITING=true
FEATURE_MONITORING=true
FEATURE_DEBUG_TOOLS=false
FEATURE_JUPYTER=false

# Error Reporting
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Performance Settings
ENABLE_COMPRESSION=true
ENABLE_CACHING=true
CACHE_STRATEGY=redis
SESSION_TIMEOUT=3600

# Load Balancing
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# Logging
LOG_FORMAT=json
LOG_MAX_SIZE=100m
LOG_MAX_FILES=5
ENABLE_REQUEST_LOGGING=false

# Metrics Collection
ENABLE_PROMETHEUS_METRICS=true
METRICS_PORT=9090
CUSTOM_METRICS_ENABLED=true

# Security Scanning
ENABLE_VULNERABILITY_SCANNING=true
SECURITY_UPDATE_INTERVAL=3600

# Compliance
ENABLE_AUDIT_LOGGING=true
DATA_RETENTION_POLICY=2y
PII_ENCRYPTION=true