id: plan-ba-dev-qa-DEMO_FEATURE
goal:
  id: ba-dev-qa-DEMO_FEATURE
  title: "BA → Dev → QA для фичи DEMO_FEATURE"
  description: "Согласовать требования, реализовать фичу и покрыть её тестами."
  constraints:
    environment: "staging"
  success_criteria:
    - "BA-спецификация согласована"
    - "Изменения в конфигурации применены на staging"
    - "Автотесты по фиче зелёные"
steps:
  - id: ba-spec
    title: "Уточнение и фиксация требований BA"
    description: "BA-агент готовит и согласует спецификацию по фиче."
    risk_level: "read_only"
    autonomy_required: "A1_propose_only"
    checks:
      - "BA-спецификация сохранена в Wiki/Docflow"
      - "Есть явное согласие ответственного BA/PO"
    executor: "agent:BA"
    metadata:
      feature_id: "DEMO_FEATURE"
      graph_refs:
        - "node:ba-requirements:BA_REQUIREMENT"
        - "node:tests/system/test_e2e_ba_dev_qa.py::test_ba_to_dev_to_qa_flow:TEST_CASE"
  - id: dev-impl
    title: "Реализация изменений разработчиком"
    description: "Dev-агент предлагает изменения в конфигурации/коде."
    risk_level: "non_prod_change"
    autonomy_required: "A2_non_prod_changes"
    checks:
      - "Все изменения применены только на test/staging"
      - "Проверка статических анализаторов зелёная"
    executor: "agent:Dev"
    metadata:
      feature_id: "DEMO_FEATURE"
      graph_refs:
        - "node:src/ai/role_based_router.py:MODULE"
        - "node:src/ai/agents/developer_ai_secure.py:MODULE"
  - id: qa-coverage
    title: "Покрытие тестами и прогон E2E"
    description: "QA-агент генерирует/обновляет тесты и запускает E2E."
    risk_level: "non_prod_change"
    autonomy_required: "A2_non_prod_changes"
    checks:
      - "Все релевантные тесты по фиче зелёные"
      - "E2E по критическим путям (API → AI → Response) прошли"
    executor: "agent:QA"
    metadata:
      feature_id: "DEMO_FEATURE"
      graph_refs:
        - "node:tests/system/test_e2e_ba_dev_qa.py:TEST_SUITE"
        - "node:monitoring/AI_SERVICES_MONITORING.md:ALERT"
required_autonomy: "A2_non_prod_changes"
overall_risk: "non_prod_change"
context:
  kind: "ba-dev-qa"
  feature_id: "DEMO_FEATURE"


