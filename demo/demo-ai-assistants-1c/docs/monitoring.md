# üìä –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Demo AI Assistants

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Demo AI Assistants –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ –≤—Å–µ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è –º–µ—Ç—Ä–∏–∫–∏, –ª–æ–≥–∏, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –∏ –∞–ª–µ—Ä—Ç—ã. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö observability –∏ follows best practices —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ DevOps.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Demo AI Assistants                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ API Gateway ‚îÇ  ‚îÇ Edge Functions‚îÇ  ‚îÇ   Frontend      ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ        ‚îÇ                 ‚îÇ                     ‚îÇ           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                 ‚îÇ                     ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ           Application Metrics & Logs           ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                  ‚îÇ                     ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇPrometheus‚îÇ     ‚îÇ Logstash    ‚îÇ      ‚îÇ Jaeger    ‚îÇ
    ‚îÇMetrics   ‚îÇ     ‚îÇ& Elasticsearch‚îÇ     ‚îÇ Tracing   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                   Grafana Dashboards             ‚îÇ
    ‚îÇ              + AlertManager Notifications        ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìä –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–µ—Ç–∞–ª—å–Ω–æ

### üîç Prometheus Stack

#### Prometheus
- **–†–æ–ª—å**: –°–±–æ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `/monitoring/prometheus/prometheus.yml`
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: 30 –¥–Ω–µ–π retention, 10GB max size
- **Scrape –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
  - API Gateway –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
  - Supabase Edge Functions –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
  - Node Exporter –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
  - Database exporter –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥

#### AlertManager
- **–†–æ–ª—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–µ—Ä—Ç–∞–º–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `/monitoring/alertmanager/alertmanager.yml`
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: Slack, Email, PagerDuty, Webhooks
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: –ü–æ —Å–µ—Ä–≤–∏—Å–∞–º –∏ severity

#### Node Exporter
- **–†–æ–ª—å**: –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Ö–æ—Å—Ç–∞
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `/monitoring/prometheus/node_exporter.yml`
- **–ú–µ—Ç—Ä–∏–∫–∏**: CPU, Memory, Disk, Network, Filesystem
- **Port**: 9100

### üìà Grafana Dashboards

#### Overview Dashboard
- **URL**: http://localhost:3000/d/overview
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—â–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–ö–ª—é—á–µ–≤—ã–µ –ø–∞–Ω–µ–ª–∏**:
  - Service Status (real-time)
  - Request Rate (RPS)
  - Response Time (95th percentile)
  - Error Rate (%)
  - CPU & Memory Usage
  - Database Connections
  - Disk Usage

#### API Gateway Dashboard
- **URL**: http://localhost:3000/d/api-gateway
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ API Gateway
- **–ú–µ—Ç—Ä–∏–∫–∏**:
  - Uptime —Å—Ç–∞—Ç—É—Å
  - Requests per Second
  - Response Time percentiles (50th, 90th, 95th, 99th)
  - Error Rate by Status Code
  - Active Connections
  - Rate Limiter Statistics
  - Cache Hit Rate
  - Top 10 slow endpoints

#### Database Dashboard
- **URL**: http://localhost:3000/d/database
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: PostgreSQL –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–ú–µ—Ç—Ä–∏–∫–∏**:
  - Connection Usage (%)
  - Database Activity (INSERT/UPDATE/DELETE)
  - Query Performance (read/write time)
  - Cache Hit Ratio
  - Deadlocks counter
  - Replication Lag
  - WAL Archiving status

### üìã ELK Stack

#### Elasticsearch
- **–†–æ–ª—å**: –ü–æ–∏—Å–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ª–æ–≥–æ–≤
- **–í–µ—Ä—Å–∏—è**: 8.11.0
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: Single node deployment
- **Heap Size**: 2GB (Xms2g -Xmx2g)
- **Port**: 9200
- **–ò–Ω–¥–µ–∫—Å—ã**: –ü–æ –¥–Ω—è–º –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### Logstash
- **–†–æ–ª—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –ª–æ–≥–æ–≤
- **Input Sources**:
  - TCP (5000) - Application logs
  - UDP (5001) - Application logs  
  - Beats (5044) - Filebeat input
  - HTTP (8080) - Custom applications
- **Pipeline**: `/monitoring/elk/logstash/pipeline/logstash.conf`
- **Features**:
  - JSON parsing
  - GeoIP enrichment
  - Error detection
  - Critical event alerting

#### Kibana
- **–†–æ–ª—å**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
- **URL**: http://localhost:5601
- **Index Patterns**: `demo-ai-assistants-logs-*`
- **Features**:
  - Real-time log search
  - Custom visualizations
  - Log correlation
  - Anomaly detection

#### Filebeat
- **–†–æ–ª—å**: –°–±–æ—Ä –ª–æ–≥–æ–≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `/monitoring/elk/filebeat/filebeat.yml`
- **Sources**: 
  - `/var/lib/docker/containers/*/*.log`
  - Kubernetes logs (if applicable)
- **Features**:
  - JSON parsing
  - Multi-line support for stack traces
  - Auto-discovery containers
  - Environment enrichment

### üîÑ Distributed Tracing

#### Jaeger
- **–†–æ–ª—å**: Distributed tracing —Å–∏—Å—Ç–µ–º–∞
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
  - Collector (14268, 14250, 9411)
  - Query Service (16686)
  - Elasticsearch backend
- **URL**: http://localhost:16686
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: OpenTelemetry SDKs

#### OpenTelemetry Collector
- **–†–æ–ª—å**: Centralized telemetry collection
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `/monitoring/opentelemetry/collector-config.yaml`
- **Receivers**: OTLP, Jaeger, Zipkin, Prometheus
- **Processors**: Batch, Memory limiter, Resource processor
- **Exporters**: Jaeger, Prometheus, Elasticsearch, Logging

### üì° Health Checks

#### Kubernetes Probes
```yaml
livenessProbe:
  httpGet:
    path: /health/live
    port: 8080
  initialDelaySeconds: 30
  periodSeconds: 30
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /health/ready  
    port: 8080
  initialDelaySeconds: 10
  periodSeconds: 10
  failureThreshold: 3

startupProbe:
  httpGet:
    path: /health/startup
    port: 8080
  initialDelaySeconds: 0
  periodSeconds: 5
  failureThreshold: 30
```

#### Custom Health Endpoints
- **Liveness**: `/health/live` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **Readiness**: `/health/ready` - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç—Ä–∞—Ñ–∏–∫—É
- **Startup**: `/health/startup` - –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞
- **Detailed**: `/health` - –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- **Metrics**: `/metrics` - Prometheus –º–µ—Ç—Ä–∏–∫–∏

## üö® –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã (üî¥)

1. **ServiceDown** (Alert)
   ```yaml
   condition: up{job="api-gateway"} == 0
   duration: 1m
   severity: critical
   ```

2. **HighErrorRate** (Alert)
   ```yaml
   condition: |
     (rate(http_requests_total{status=~"5.."}[5m]) /
      rate(http_requests_total[5m])) * 100 > 5
   duration: 2m
   severity: critical
   ```

3. **HighMemoryUsage** (Alert)
   ```yaml
   condition: |
     (container_memory_usage_bytes{name!=""} /
      container_spec_memory_limit_bytes{name!=""} * 100) > 90
   duration: 5m
   severity: critical
   ```

### –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (üü°)

1. **HighLatency** (Alert)
   ```yaml
   condition: |
     histogram_quantile(0.95,
       rate(http_request_duration_seconds_bucket{job="api-gateway"}[5m])
     ) > 1
   duration: 5m
   severity: warning
   ```

2. **HighCPUUsage** (Alert)
   ```yaml
   condition: |
     (rate(container_cpu_usage_seconds_total{name!=""}[5m]) * 100) > 80
   duration: 5m
   severity: warning
   ```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### Slack –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```yaml
slack_configs:
  - api_url: 'https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK'
    channel: '#critical-alerts'
    color: 'danger'  # –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö
    color: 'warning' # –î–ª—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
```

#### Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```yaml
email_configs:
  - to: 'critical-alerts@company.com'
    subject: 'üö® CRITICAL: {{ .GroupLabels.service }} - {{ .GroupLabels.alertname }}'
```

#### –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- **API –∫–æ–º–∞–Ω–¥–∞**: api-team@company.com ‚Üí #api-alerts
- **Backend –∫–æ–º–∞–Ω–¥–∞**: backend-team@company.com ‚Üí #backend-alerts  
- **DBA –∫–æ–º–∞–Ω–¥–∞**: dba-team@company.com ‚Üí #database-alerts
- **DevOps –∫–æ–º–∞–Ω–¥–∞**: devops-team@company.com ‚Üí #devops-alerts

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

–í—Å–µ –ª–æ–≥–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "timestamp": "2025-11-02T10:57:28.000Z",
  "level": "info",
  "service": "api-gateway",
  "message": "Request processed successfully",
  "correlation_id": "trace-1730633848000-abc123def",
  "user_id": "user_67890",
  "request_duration": 125,
  "response_size": 1024,
  "endpoint": "/api/v1/predict",
  "method": "POST",
  "status": 200,
  "client_ip": "192.168.1.100",
  "environment": "production"
}
```

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- `timestamp` - ISO 8601 —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
- `level` - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (debug, info, warn, error, critical)
- `service` - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
- `message` - –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `correlation_id` - ID –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)

### –ò–Ω–¥–µ–∫—Å—ã Elasticsearch

1. **demo-ai-assistants-logs-YYYY.MM.dd** - –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. **demo-ai-assistants-errors-YYYY.MM.dd** - –û—à–∏–±–∫–∏ (level: error, critical)
3. **demo-ai-assistants-critical-YYYY.MM.dd** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è

### Log rotation –∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–ò–Ω–¥–µ–∫—Å lifecycle**: 30 –¥–Ω–µ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è
- **Hot-warm –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Hot (7 –¥–Ω–µ–π) ‚Üí Warm (23 –¥–Ω—è) ‚Üí Delete
- **Snapshot –±—ç–∫–∞–ø—ã**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ S3 –∏–ª–∏ –∞–Ω–∞–ª–æ–≥

## üîç Distributed Tracing

### Correlation IDs

Correlation ID –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ –≤—Å—é —Å–∏—Å—Ç–µ–º—É:

```javascript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è correlation ID
const correlationId = `trace-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;

// –í HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
headers: {
  'X-Correlation-ID': correlationId,
  'X-Trace-ID': correlationId,
  'X-Span-ID': currentSpanId
}

// –í –ª–æ–≥–∞—Ö
console.log(JSON.stringify({
  timestamp: new Date().toISOString(),
  level: 'info',
  service: 'api-gateway',
  message: 'Processing request',
  correlation_id: correlationId,
  request_id: requestId
}));
```

### Jaeger –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

1. **Instrumentation**: OpenTelemetry SDK –≤ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ
2. **Trace Collection**: –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Jaeger Collector
3. **Correlation**: Trace ID —Å–≤—è–∑–∞–Ω —Å –ª–æ–≥–∞–º–∏
4. **Performance Analysis**: Trace –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–π—Ç–∏ bottleneck'—ã

### OpenTelemetry Configuration

```yaml
# Collector –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
      http:
        endpoint: 0.0.0.0:4318

processors:
  batch:
    timeout: 1s
    send_batch_size: 8192
  resource:
    attributes:
      - key: service.name
        value: demo-ai-assistants
        action: upsert

exporters:
  jaeger:
    endpoint: jaeger-collector:14250
  elasticsearch:
    endpoints: [http://elasticsearch:9200]
    index: demo-traces-{+yyyy.MM.dd}
```

## üè• Health Checks

### Endpoint Specification

#### GET /health/live
```json
{
  "status": "alive",
  "timestamp": "2025-11-02T10:57:28.000Z",
  "uptime": 3600000,
  "checks": {
    "alive": true
  }
}
```

#### GET /health/ready
```json
{
  "status": "ready",
  "timestamp": "2025-11-02T10:57:28.000Z",
  "uptime": 3600000,
  "checks": {
    "ready": true,
    "dependencies": {
      "database": true,
      "cache": true,
      "external_services": true
    }
  }
}
```

#### GET /health
```json
{
  "status": "healthy",
  "timestamp": "2025-11-02T10:57:28.000Z",
  "version": "1.0.0",
  "environment": "production",
  "checks": {
    "liveness": {
      "status": "pass",
      "timestamp": "2025-11-02T10:57:28.000Z"
    },
    "readiness": {
      "status": "pass", 
      "timestamp": "2025-11-02T10:57:28.000Z"
    },
    "dependencies": {
      "database": {
        "status": "healthy",
        "service": "PostgreSQL/Supabase"
      },
      "cache": {
        "status": "healthy",
        "service": "Redis"
      },
      "external_services": {
        "status": "healthy",
        "service": "External APIs"
      }
    }
  }
}
```

### Kubernetes –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

Health checks –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å Kubernetes —á–µ—Ä–µ–∑ probe endpoints:

```yaml
spec:
  containers:
  - name: api-gateway
    livenessProbe:
      httpGet:
        path: /health/live
        port: 8080
      failureThreshold: 3
      periodSeconds: 30
      
    readinessProbe:
      httpGet:
        path: /health/ready
        port: 8080
      failureThreshold: 3
      periodSeconds: 10
```

## üìä Performance Monitoring

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

1. **Latency Metrics**:
   - P50, P90, P95, P99 response times
   - Request duration histogram
   - Database query time

2. **Throughput Metrics**:
   - Requests per second (RPS)
   - Transactions per second (TPS)
   - Database connections active

3. **Error Metrics**:
   - Error rate percentage
   - HTTP status code distribution
   - Exception counts

4. **Resource Metrics**:
   - CPU usage percentage
   - Memory usage percentage
   - Disk I/O operations
   - Network throughput

### SLA Targets

- **Availability**: 99.5% uptime
- **Response Time**: P95 < 1s, P99 < 2s
- **Error Rate**: < 1% for critical paths
- **Database Performance**: Query time < 500ms (P95)

### Dashboards

1. **Executive Dashboard**: High-level KPI summary
2. **Operations Dashboard**: Real-time monitoring
3. **Development Dashboard**: Detailed debugging metrics
4. **Business Dashboard**: User behavior and usage patterns

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker & Docker Compose
- –ú–∏–Ω–∏–º—É–º 8GB RAM –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å—Ç–µ–∫–∞
- 50GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è –ª–æ–≥–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫
- –°–µ—Ç–µ–≤—ã–µ –ø–æ—Ä—Ç—ã: 3000, 5601, 8080, 9090, 9200, 16686, 24224

### Quick Start

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd demo-ai-assistants-1c

# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
cd monitoring
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps
docker-compose logs -f

# –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
open http://localhost:3000  # Grafana
open http://localhost:5601  # Kibana
open http://localhost:16686  # Jaeger
```

### Production Considerations

1. **Security**:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TLS –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
   - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ Grafana –∏ Kibana
   - –°–µ—Ç–µ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Kubernetes

2. **High Availability**:
   - Multi-node Elasticsearch cluster
   - Prometheus federation
   - AlertManager clustering

3. **Performance**:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ resource limits
   - Monitoring dashboard optimization
   - Log retention policies

## üîß Troubleshooting

### –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Prometheus –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ targets
   curl http://localhost:9090/api/v1/targets
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   docker-compose logs prometheus
   ```

2. **–õ–æ–≥–∏ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ Elasticsearch**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ Elasticsearch
   curl http://localhost:9200/_cluster/health
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ Logstash
   curl http://localhost:9600/_node/stats
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ Filebeat
   docker logs filebeat
   ```

3. **–ê–ª–µ—Ä—Ç—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ AlertManager
   curl http://localhost:9093/api/v1/alerts
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook endpoints
   curl -X POST http://alertmanager-webhook:8080/test
   ```

4. **Jaeger –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç traces**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ Jaeger collector
   curl http://localhost:14269/
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ OpenTelemetry collector
   curl http://localhost:8888/metrics
   ```

### Performance optimization

1. **Prometheus retention**:
   ```yaml
   command:
     - '--storage.tsdb.retention.time=30d'
     - '--storage.tsdb.retention.size=10GB'
   ```

2. **Elasticsearch heap**:
   ```yaml
   environment:
     - ES_JAVA_OPTS=-Xms4g -Xmx4g
   ```

3. **Log rotation**:
   ```yaml
   elasticsearch:
     setup.ilm.policy: "demo-logs-policy"
     setup.ilm.rollover_alias: "demo-ai-assistants-logs"
   ```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Prometheus Documentation](https://prometheus.io/docs/)
- [Grafana Documentation](https://grafana.com/docs/)
- [Elasticsearch Guide](https://www.elastic.co/guide/)
- [Jaeger Documentation](https://www.jaegertracing.io/docs/)
- [OpenTelemetry Documentation](https://opentelemetry.io/docs/)
- [Kubernetes Health Checks](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/)

### Best Practices
- [Observability Best Practices](https://www.honeycomb.io/blog/observability-best-practices/)
- [Monitoring Microservices](https://www.datadoghq.com/resources/monitoring-microservices/)
- [Logging Best Practices](https://www.loggly.com/ultimate-guide/python-logging-best-practices/)

### Community
- [Prometheus Community](https://prometheus.io/community/)
- [Grafana Community](https://community.grafana.com/)
- [Elastic Community](https://www.elastic.co/community/)

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Demo AI Assistants** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ observability! üöÄ